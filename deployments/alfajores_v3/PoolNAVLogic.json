{
  "address": "0xf6EAa4e37Eb28F484bB2dfbDB801750C3Af28f2e",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "principalAmount",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "uint128",
              "name": "futureValue",
              "type": "uint128"
            },
            {
              "internalType": "uint128",
              "name": "maturityDate",
              "type": "uint128"
            },
            {
              "internalType": "uint128",
              "name": "risk",
              "type": "uint128"
            },
            {
              "internalType": "address",
              "name": "debtor",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "principalTokenAddress",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "salt",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "issuanceBlockTimestamp",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "expirationTimestamp",
              "type": "uint256"
            },
            {
              "internalType": "enum Configuration.ASSET_PURPOSE",
              "name": "assetPurpose",
              "type": "uint8"
            },
            {
              "internalType": "bytes32",
              "name": "termsParam",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "principalAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "termStartUnixTimestamp",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "termEndUnixTimestamp",
              "type": "uint256"
            },
            {
              "internalType": "enum UnpackLoanParamtersLib.AmortizationUnitType",
              "name": "amortizationUnitType",
              "type": "uint8"
            },
            {
              "internalType": "uint256",
              "name": "termLengthInAmortizationUnits",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "interestRate",
              "type": "uint256"
            }
          ],
          "indexed": false,
          "internalType": "struct DataTypes.NFTDetails",
          "name": "nftdetails",
          "type": "tuple"
        }
      ],
      "name": "AddLoan",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "currencyAmount",
          "type": "uint256"
        }
      ],
      "name": "DecreaseDebt",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "currencyAmount",
          "type": "uint256"
        }
      ],
      "name": "IncreaseDebt",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "currencyAmount",
          "type": "uint256"
        }
      ],
      "name": "Repay",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "maturityDate_",
          "type": "uint256"
        }
      ],
      "name": "SetLoanMaturity",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "risk",
          "type": "uint256"
        }
      ],
      "name": "UpdateAssetRiskScore",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loan",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "writeOffGroupsIndex",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "override_",
          "type": "bool"
        }
      ],
      "name": "WriteOff",
      "type": "event"
    }
  ],
  "transactionHash": "0x93d1a93342487d157586b2350b148c0ccdeda9ea45d71092046f313d55d40640",
  "receipt": {
    "to": null,
    "from": "0xC52a72eDdcA008580b4Efc89eA9f343AfF11FeA3",
    "contractAddress": "0xf6EAa4e37Eb28F484bB2dfbDB801750C3Af28f2e",
    "transactionIndex": 1,
    "gasUsed": "3296367",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x98d33b62af584770058e4b71f927a00aa39a72cfc65a64faac8590940b5048ef",
    "transactionHash": "0x93d1a93342487d157586b2350b148c0ccdeda9ea45d71092046f313d55d40640",
    "logs": [],
    "blockNumber": 22778988,
    "cumulativeGasUsed": "3424466",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 3,
  "solcInputHash": "fbe0a1060ca3abbe44cc7e797aa5558c",
  "metadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"principalAmount\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"uint128\",\"name\":\"futureValue\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"maturityDate\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"risk\",\"type\":\"uint128\"},{\"internalType\":\"address\",\"name\":\"debtor\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"principalTokenAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"salt\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"issuanceBlockTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expirationTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"enum Configuration.ASSET_PURPOSE\",\"name\":\"assetPurpose\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"termsParam\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"principalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"termStartUnixTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"termEndUnixTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"enum UnpackLoanParamtersLib.AmortizationUnitType\",\"name\":\"amortizationUnitType\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"termLengthInAmortizationUnits\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"}],\"indexed\":false,\"internalType\":\"struct DataTypes.NFTDetails\",\"name\":\"nftdetails\",\"type\":\"tuple\"}],\"name\":\"AddLoan\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currencyAmount\",\"type\":\"uint256\"}],\"name\":\"DecreaseDebt\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currencyAmount\",\"type\":\"uint256\"}],\"name\":\"IncreaseDebt\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currencyAmount\",\"type\":\"uint256\"}],\"name\":\"Repay\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityDate_\",\"type\":\"uint256\"}],\"name\":\"SetLoanMaturity\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"risk\",\"type\":\"uint256\"}],\"name\":\"UpdateAssetRiskScore\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loan\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"writeOffGroupsIndex\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"override_\",\"type\":\"bool\"}],\"name\":\"WriteOff\",\"type\":\"event\"}],\"devdoc\":{\"author\":\"Untangled Team\",\"kind\":\"dev\",\"methods\":{\"file(DataTypes.Storage storage,bytes32,uint256)\":{\"params\":{\"name\":\"name of the parameter\",\"value\":\"new value of the parameter\"}},\"file(DataTypes.Storage storage,bytes32,uint256,uint256,uint256,uint256,uint256)\":{\"params\":{\"name\":\"name of the parameter group\",\"overdueDays_\":\"the number of days after which a loan is considered overdue\",\"writeOffPercentage_\":\"the write off rate in percent\"}},\"repayLoan(DataTypes.Storage storage,uint256[],uint256[])\":{\"params\":{\"amounts\":\"the amounts repaid\",\"loans\":\"the ids of the loan\"}},\"writeOff(DataTypes.Storage storage,uint256)\":{\"params\":{\"loan\":\"the id of the loan\"}}},\"title\":\"Untangled's SecuritizaionPoolNAV contract\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"addLoan(DataTypes.Storage storage,uint256,DataTypes.LoanEntry)\":{\"notice\":\"UTILITY FUNCTION \"},\"file(DataTypes.Storage storage,bytes32,uint256)\":{\"notice\":\"file allows governance to change parameters of the contract\"},\"file(DataTypes.Storage storage,bytes32,uint256,uint256,uint256,uint256,uint256)\":{\"notice\":\"file allows governance to change parameters of the contract\"},\"repayLoan(DataTypes.Storage storage,uint256[],uint256[])\":{\"notice\":\"repay updates the NAV for a new repaid loan\"},\"writeOff(DataTypes.Storage storage,uint256)\":{\"notice\":\"writeOff writes off a loan if it is overdue\"}},\"notice\":\"Main entry point for senior LPs (a.k.a. capital providers)  Automatically invests across borrower pools using an adjustable strategy.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/libraries/logic/PoolNAVLogic.sol\":\"PoolNAVLogic\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":1},\"remappings\":[]},\"sources\":{\"contracts/libraries/Configuration.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity 0.8.19;\\n\\n/// @title Configuration\\n/// @author Untangled Team\\nlibrary Configuration {\\n    // NEVER EVER CHANGE THE ORDER OF THESE!\\n    // You can rename or append. But NEVER change the order.\\n    enum CONTRACT_TYPE {\\n        SECURITIZATION_MANAGER,\\n        SECURITIZATION_POOL,\\n        NOTE_TOKEN_FACTORY,\\n        TOKEN_GENERATION_EVENT_FACTORY,\\n        DISTRIBUTION_ASSESSOR,\\n        LOAN_ASSET_TOKEN,\\n        LOAN_KERNEL,\\n        SECURITIZATION_POOL_VALUE_SERVICE,\\n        GO,\\n        NOTE_TOKEN_VAULT\\n    }\\n\\n    enum NOTE_TOKEN_TYPE {\\n        SENIOR,\\n        JUNIOR\\n    }\\n\\n    enum ASSET_PURPOSE {\\n        LOAN,\\n        INVOICE\\n    }\\n}\\n\",\"keccak256\":\"0x1874e4d4425c10a717621040e9da43851b9c9826211c9929cd21b701729dfe4e\",\"license\":\"AGPL-3.0-only\"},\"contracts/libraries/DataTypes.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity 0.8.19;\\n\\n// import '../storage/Registry.sol';\\nimport './Configuration.sol';\\nimport './UnpackLoanParamtersLib.sol';\\n\\nbytes32 constant OWNER_ROLE = keccak256('OWNER_ROLE');\\nbytes32 constant POOL_ADMIN = keccak256('POOL_CREATOR');\\nbytes32 constant ORIGINATOR_ROLE = keccak256('ORIGINATOR_ROLE');\\n\\nbytes32 constant BACKEND_ADMIN = keccak256('BACKEND_ADMIN');\\nbytes32 constant SIGNER_ROLE = keccak256('SIGNER_ROLE');\\n\\n// In PoolNAV we use this\\nbytes32 constant POOL = keccak256('POOL');\\n\\nuint256 constant RATE_SCALING_FACTOR = 10 ** 4;\\n\\nuint256 constant ONE_HUNDRED_PERCENT = 100 * RATE_SCALING_FACTOR;\\n\\nuint256 constant ONE = 10 ** 27;\\nuint256 constant PRICE_DECIMAL = 10 ** 18;\\nuint256 constant WRITEOFF_RATE_GROUP_START = 1000 * ONE;\\n\\nbytes32 constant VALIDATOR_ROLE = keccak256('VALIDATOR_ROLE');\\nbytes32 constant VALIDATOR_ADMIN_ROLE = keccak256('VALIDATOR_ADMIN_ROLE');\\n\\nbytes32 constant MINTER_ROLE = keccak256('MINTER_ROLE');\\n\\nlibrary DataTypes {\\n    enum CycleState {\\n        INITIATED,\\n        CROWDSALE,\\n        CLOSED\\n    }\\n\\n    struct NoteToken {\\n        address poolAddress;\\n        address noteTokenAddress;\\n        uint256 balance;\\n        uint256 apy;\\n    }\\n    struct RiskScore {\\n        uint32 daysPastDue;\\n        uint32 advanceRate;\\n        uint32 penaltyRate;\\n        uint32 interestRate;\\n        uint32 probabilityOfDefault;\\n        uint32 lossGivenDefault;\\n        uint32 writeOffAfterGracePeriod;\\n        uint32 gracePeriod;\\n        uint32 collectionPeriod;\\n        uint32 writeOffAfterCollectionPeriod;\\n        uint32 discountRate;\\n    }\\n\\n    struct LoanEntry {\\n        address debtor;\\n        address principalTokenAddress;\\n        bytes32 termsParam; // actually inside this param was already included P token address\\n        uint256 salt;\\n        uint256 issuanceBlockTimestamp;\\n        uint256 expirationTimestamp;\\n        uint8 riskScore;\\n        Configuration.ASSET_PURPOSE assetPurpose;\\n    }\\n    struct NFTAsset {\\n        address tokenAddress;\\n        uint256 tokenId;\\n    }\\n\\n    struct NewPoolParams {\\n        address currency;\\n        uint32 minFirstLossCushion;\\n        bool validatorRequired;\\n        uint256 debtCeiling;\\n    }\\n\\n    /// @notice details of the underlying collateral\\n    struct NFTDetails {\\n        uint128 futureValue;\\n        uint128 maturityDate;\\n        uint128 risk;\\n        address debtor;\\n        address principalTokenAddress;\\n        uint256 salt;\\n        uint256 issuanceBlockTimestamp;\\n        uint256 expirationTimestamp;\\n        Configuration.ASSET_PURPOSE assetPurpose;\\n        bytes32 termsParam;\\n        uint256 principalAmount;\\n        uint256 termStartUnixTimestamp;\\n        uint256 termEndUnixTimestamp;\\n        UnpackLoanParamtersLib.AmortizationUnitType amortizationUnitType;\\n        uint256 termLengthInAmortizationUnits;\\n        uint256 interestRate;\\n    }\\n\\n    /// @notice stores all needed information of an interest rate group\\n    struct Rate {\\n        // total debt of all loans with this rate\\n        uint256 pie;\\n        // accumlated rate index over time\\n        uint256 chi;\\n        // interest rate per second\\n        uint256 ratePerSecond;\\n        // penalty rate per second\\n        uint256 penaltyRatePerSecond;\\n        // accumlated penalty rate index over time\\n        uint256 penaltyChi;\\n        // last time the rate was accumulated\\n        uint48 lastUpdated;\\n        // time start to penalty\\n        uint48 timeStartPenalty;\\n    }\\n\\n    /// @notice details of the loan\\n    struct LoanDetails {\\n        uint128 borrowed;\\n        // only auth calls can move loan into different writeOff group\\n        bool authWriteOff;\\n    }\\n\\n    /// @notice details of the write off group\\n    struct WriteOffGroup {\\n        // denominated in (10^27)\\n        uint128 percentage;\\n        // amount of days after the maturity days that the writeoff group can be applied by default\\n        uint128 overdueDays;\\n        uint128 riskIndex;\\n    }\\n\\n    struct Storage {\\n        bool validatorRequired;\\n        uint64 firstAssetTimestamp;\\n        RiskScore[] riskScores;\\n        NFTAsset[] nftAssets;\\n        address[] tokenAssetAddresses;\\n        mapping(address => bool) existsTokenAssetAddress;\\n        // TGE\\n        address tgeAddress;\\n        address secondTGEAddress;\\n        address sotToken;\\n        address jotToken;\\n        address underlyingCurrency;\\n        uint256 reserve; // Money in pool\\n        uint32 minFirstLossCushion;\\n        uint64 openingBlockTimestamp;\\n        // by default it is address(this)\\n        address pot;\\n        // for base (sell-loan) operation\\n        uint256 paidPrincipalAmountSOT;\\n        uint256 interestRateSOT; // Annually, support 4 decimals num\\n        uint256 totalAssetRepaidCurrency;\\n        mapping(address => uint256) paidPrincipalAmountSOTByInvestor;\\n        uint256 debtCeiling;\\n        CycleState state;\\n        // lock distribution\\n        mapping(address => mapping(address => uint256)) lockedDistributeBalances;\\n        uint256 totalLockedDistributeBalance;\\n        mapping(address => mapping(address => uint256)) lockedRedeemBalances;\\n        // token address -> total locked\\n        mapping(address => uint256) totalLockedRedeemBalances;\\n        uint256 totalRedeemedCurrency; // Total $ (cUSD) has been redeemed\\n        /// @notice Interest Rate Groups are identified by a `uint` and stored in a mapping\\n        mapping(uint256 => Rate) rates;\\n        mapping(uint256 => uint256) pie;\\n        /// @notice mapping from loan => rate\\n        mapping(uint256 => uint256) loanRates;\\n        /// @notice mapping from loan => grace time\\n\\n        uint256 loanCount;\\n        mapping(uint256 => uint256) balances;\\n        uint256 balance;\\n        // nft => details\\n        mapping(bytes32 => NFTDetails) details;\\n        // loan => details\\n        mapping(uint256 => LoanDetails) loanDetails;\\n        // timestamp => bucket\\n        mapping(uint256 => uint256) buckets;\\n        WriteOffGroup[] writeOffGroups;\\n        // Write-off groups will be added as rate groups to the pile with their index\\n        // in the writeOffGroups array + this number\\n        //        uint256 constant WRITEOFF_RATE_GROUP_START = 1000 * ONE;\\n        //        uint256 constant INTEREST_RATE_SCALING_FACTOR_PERCENT = 10 ** 4;\\n\\n        // Discount rate applied on every asset's fv depending on its maturityDate.\\n        // The discount decreases with the maturityDate approaching.\\n        // denominated in (10^27)\\n        uint256 discountRate;\\n        // latestNAV is calculated in case of borrows & repayments between epoch executions.\\n        // It decreases/increases the NAV by the repaid/borrowed amount without running the NAV calculation routine.\\n        // This is required for more accurate Senior & JuniorAssetValue estimations between epochs\\n        uint256 latestNAV;\\n        uint256 latestDiscount;\\n        uint256 lastNAVUpdate;\\n        // overdue loans are loans which passed the maturity date but are not written-off\\n        uint256 overdueLoans;\\n        // tokenId => latestDiscount\\n        mapping(bytes32 => uint256) latestDiscountOfNavAssets;\\n        mapping(bytes32 => uint256) overdueLoansOfNavAssets;\\n        mapping(uint256 => bytes32) loanToNFT;\\n        // value to view\\n        uint256 totalPrincipalRepaid;\\n        uint256 totalInterestRepaid;\\n        // value to calculate rebase\\n        uint256 seniorDebt;\\n        uint256 seniorBalance;\\n        uint64 lastUpdateSeniorInterest;\\n    }\\n\\n    struct LoanAssetInfo {\\n        uint256[] tokenIds;\\n        uint256[] nonces;\\n        address validator;\\n        bytes validateSignature;\\n    }\\n}\\n\",\"keccak256\":\"0x37bb7fd2ab65343285303c7c0ff400172567d9e73fd1e889ee463bdb7714e0e2\",\"license\":\"AGPL-3.0-only\"},\"contracts/libraries/Discounting.sol\":{\"content\":\"/// SPDX-License-Identifier: AGPL-3.0-or-later\\n\\n// https://github.com/centrifuge/tinlake\\n// src/borrower/feed/discounting.sol -- Tinlake Discounting\\n\\n// Copyright (C) 2022 Centrifuge\\n// Copyright (C) 2023 Untangled.Finance\\n//\\n// This program is free software: you can redistribute it and/or modify\\n// it under the terms of the GNU Affero General Public License as published by\\n// the Free Software Foundation, either version 3 of the License, or\\n// (at your option) any later version.\\n//\\n// This program is distributed in the hope that it will be useful,\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n// GNU Affero General Public License for more details.\\n//\\n// You should have received a copy of the GNU Affero General Public License\\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n\\npragma solidity 0.8.19;\\n\\nimport './Math.sol';\\n\\n/// @notice Discounting contract without a state which defines the relevant formulas for the navfeed\\nlibrary Discounting{\\n    /// @notice calculates the discount for a given loan\\n    /// @param discountRate the discount rate\\n    /// @param fv the future value of the loan\\n    /// @param normalizedBlockTimestamp the normalized block time (each day to midnight)\\n    /// @param maturityDate the maturity date of the loan\\n    /// @return result discount for the loan\\n    function calcDiscount(\\n        uint256 discountRate,\\n        uint256 fv,\\n        uint256 normalizedBlockTimestamp,\\n        uint256 maturityDate\\n    ) internal pure returns (uint256 result) {\\n        return Math.rdiv(fv, rpow(discountRate, Math.safeSub(maturityDate, normalizedBlockTimestamp), Math.ONE));\\n    }\\n\\n    /// @notice calculate the future value based on the amount, maturityDate interestRate and recoveryRate\\n    /// @param loanInterestRate the interest rate of the loan\\n    /// @param amount of the loan (principal)\\n    /// @param maturityDate the maturity date of the loan\\n    /// @param recoveryRatePD the recovery rate together with the probability of default of the loan\\n    /// @return fv future value of the loan\\n    function calcFutureValue(\\n        uint256 loanInterestRate,\\n        uint256 amount,\\n        uint256 maturityDate,\\n        uint256 recoveryRatePD\\n    ) internal view returns (uint256 fv) {\\n        uint256 nnow = uniqueDayTimestamp(block.timestamp);\\n        uint256 timeRemaining = 0;\\n        if (maturityDate > nnow) {\\n            timeRemaining = Math.safeSub(maturityDate, nnow);\\n        }\\n\\n        return Math.rmul(Math.rmul(rpow(loanInterestRate, timeRemaining, Math.ONE), amount), recoveryRatePD);\\n    }\\n\\n    /// @notice substracts to values if the result smaller than 0 it returns 0\\n    /// @param x the first value (minuend)\\n    /// @param y the second value (subtrahend)\\n    /// @return result result of the subtraction\\n    function secureSub(uint256 x, uint256 y) internal pure returns (uint256 result) {\\n        if (y > x) {\\n            return 0;\\n        }\\n        return Math.safeSub(x, y);\\n    }\\n\\n    /// @notice normalizes a timestamp to round down to the nearest midnight (UTC)\\n    /// @param timestamp the timestamp which should be normalized\\n    /// @return nTimestamp normalized timestamp\\n    function uniqueDayTimestamp(uint256 timestamp) internal pure returns (uint256 nTimestamp) {\\n        return (1 days) * (timestamp / (1 days));\\n    }\\n\\n    /// @notice rpow peforms a math pow operation with fixed point number\\n    /// adopted from ds-math\\n    /// @param x the base for the pow operation\\n    /// @param n the exponent for the pow operation\\n    /// @param base the base of the fixed point number\\n    /// @return z the result of the pow operation\\n\\n    function rpow(uint256 x, uint256 n, uint256 base) internal pure returns (uint256 z) {\\n        assembly {\\n            switch x\\n            case 0 {\\n                switch n\\n                case 0 {\\n                    z := base\\n                }\\n                default {\\n                    z := 0\\n                }\\n            }\\n            default {\\n                switch mod(n, 2)\\n                case 0 {\\n                    z := base\\n                }\\n                default {\\n                    z := x\\n                }\\n                let half := div(base, 2) // for rounding.\\n                for {\\n                    n := div(n, 2)\\n                } n {\\n                    n := div(n, 2)\\n                } {\\n                    let xx := mul(x, x)\\n                    if iszero(eq(div(xx, x), x)) {\\n                        revert(0, 0)\\n                    }\\n                    let xxRound := add(xx, half)\\n                    if lt(xxRound, xx) {\\n                        revert(0, 0)\\n                    }\\n                    x := div(xxRound, base)\\n                    if mod(n, 2) {\\n                        let zx := mul(z, x)\\n                        if and(iszero(iszero(x)), iszero(eq(div(zx, x), z))) {\\n                            revert(0, 0)\\n                        }\\n                        let zxRound := add(zx, half)\\n                        if lt(zxRound, zx) {\\n                            revert(0, 0)\\n                        }\\n                        z := div(zxRound, base)\\n                    }\\n                }\\n            }\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x7c09baef5bd2f51ed8e4bb1349e36311026fa024c0f78aab90a915f31a4b109f\",\"license\":\"AGPL-3.0-or-later\"},\"contracts/libraries/Math.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-or-later\\n\\n// tinlake-math/math.sol -- Tinlake Math\\n\\n// Copyright (C) 2022 Centrifuge\\n// Copyright (C) 2023 Untangled.Finance\\n//\\n// This program is free software: you can redistribute it and/or modify\\n// it under the terms of the GNU Affero General Public License as published by\\n// the Free Software Foundation, either version 3 of the License, or\\n// (at your option) any later version.\\n//\\n// This program is distributed in the hope that it will be useful,\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n// GNU Affero General Public License for more details.\\n//\\n// You should have received a copy of the GNU Affero General Public License\\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n\\npragma solidity 0.8.19;\\n\\nlibrary Math {\\n    uint256 constant ONE = 10 ** 27;\\n\\n    function safeAdd(uint x, uint y) internal pure returns (uint z) {\\n        require((z = x + y) >= x, 'safe-add-failed');\\n    }\\n\\n    function safeSub(uint x, uint y) internal pure returns (uint z) {\\n        require((z = x - y) <= x, 'safe-sub-failed');\\n    }\\n\\n    function safeMul(uint x, uint y) internal pure returns (uint z) {\\n        require(y == 0 || (z = x * y) / y == x, 'safe-mul-failed');\\n    }\\n\\n    function safeDiv(uint x, uint y) internal pure returns (uint z) {\\n        z = x / y;\\n    }\\n\\n    function rmul(uint x, uint y) internal pure returns (uint z) {\\n        z = safeMul(x, y) / ONE;\\n    }\\n\\n    function rdiv(uint x, uint y) internal pure returns (uint z) {\\n        require(y > 0, 'division by zero');\\n        z = safeAdd(safeMul(x, ONE), y / 2) / y;\\n    }\\n\\n    function rdivup(uint x, uint y) internal pure returns (uint z) {\\n        require(y > 0, 'division by zero');\\n        // always rounds up\\n        z = safeAdd(safeMul(x, ONE), safeSub(y, 1)) / y;\\n    }\\n}\\n\",\"keccak256\":\"0xe54a76a0187d338f79a8d84f2cfacda9473be91401dadbe5bcb7ae6e7b39c77b\",\"license\":\"AGPL-3.0-or-later\"},\"contracts/libraries/UnpackLoanParamtersLib.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity >=0.5.10;\\n\\nlibrary UnpackLoanParamtersLib {\\n    struct InterestParams {\\n        uint256 principalAmount;\\n        uint256 termStartUnixTimestamp;\\n        uint256 termEndUnixTimestamp;\\n        AmortizationUnitType amortizationUnitType;\\n        uint256 termLengthInAmortizationUnits;\\n        // interest rates can, at a maximum, have 4 decimal places of precision.\\n        uint256 interestRate;\\n    }\\n\\n    enum AmortizationUnitType {\\n        MINUTES, // 0 - since 1.0.13\\n        HOURS, // 1\\n        DAYS, // 2\\n        WEEKS, // 3\\n        MONTHS, // 4\\n        YEARS // 5\\n    }\\n\\n    /**\\n     *\\n     * Notice: * uint256 (a) reinterprets a as 256-bit unsigned integer. As long as 256 bit = 32 bytes\\n     */\\n    function _bitShiftRight(bytes32 value, uint256 amount) internal pure returns (uint256) {\\n        return uint256(value) / 2 ** amount;\\n    }\\n\\n    /**\\n     * Unpack parameters from packed bytes32 data\\n     */\\n    function _unpackLoanTermsParametersFromBytes(\\n        bytes32 parameters\\n    )\\n        internal\\n        pure\\n        returns (\\n            uint256 _principalAmount,\\n            uint256 _interestRate,\\n            uint256 _amortizationUnitType,\\n            uint256 _termLengthInAmortizationUnits,\\n            uint256 _gracePeriodInDays\\n        )\\n    {\\n        // The subsequent 12 bytes of the parameters encode the PRINCIPAL AMOUNT.\\n        bytes32 principalAmountShifted = parameters &\\n            0x00ffffffffffffffffffffffff00000000000000000000000000000000000000;\\n        // The subsequent 3 bytes of the parameters encode the INTEREST RATE.\\n        bytes32 interestRateShifted = parameters & 0x00000000000000000000000000ffffff00000000000000000000000000000000;\\n        // The subsequent 4 bits (half byte) encode the AMORTIZATION UNIT TYPE code.\\n        bytes32 amortizationUnitTypeShifted = parameters &\\n            0x00000000000000000000000000000000f0000000000000000000000000000000;\\n        // The subsequent 12 bytes encode the term length, as denominated in\\n        // the encoded amortization unit.\\n        bytes32 termLengthInAmortizationUnitsShifted = parameters &\\n            0x000000000000000000000000000000000ffffffffffffffffffffffff0000000;\\n\\n        bytes32 gracePeriodInDaysShifted = parameters &\\n            0x000000000000000000000000000000000000000000000000000000000ff00000;\\n\\n        return (\\n            _bitShiftRight(principalAmountShifted, 152),\\n            _bitShiftRight(interestRateShifted, 128),\\n            _bitShiftRight(amortizationUnitTypeShifted, 124),\\n            _bitShiftRight(termLengthInAmortizationUnitsShifted, 28),\\n            _bitShiftRight(gracePeriodInDaysShifted, 20)\\n        );\\n    }\\n\\n    /**\\n     * Unpack data from hex string which including informations about Loan\\n     */\\n    function unpackParametersFromBytes(\\n        bytes32 parameters\\n    )\\n        internal\\n        pure\\n        returns (\\n            uint256 _principalAmount,\\n            uint256 _interestRate,\\n            uint256 _amortizationUnitType,\\n            uint256 _termLengthInAmortizationUnits,\\n            uint256 _gracePeriodInDays\\n        )\\n    {\\n        return _unpackLoanTermsParametersFromBytes(parameters);\\n    }\\n}\\n\",\"keccak256\":\"0x2a8c8c03b60f1e569f20ef15c5439074ac43b6824bb143526f08a332447d0f54\",\"license\":\"AGPL-3.0-only\"},\"contracts/libraries/logic/GenericLogic.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-or-later\\n\\n// https://github.com/centrifuge/tinlake\\n// src/borrower/feed/navfeed.sol -- Tinlake NAV Feed\\n\\n// Copyright (C) 2022 Centrifuge\\n// Copyright (C) 2023 Untangled.Finance\\n//\\n// This program is free software: you can redistribute it and/or modify\\n// it under the terms of the GNU Affero General internal License as published by\\n// the Free Software Foundation, either version 3 of the License, or\\n// (at your option) any later version.\\n//\\n// This program is distributed in the hope that it will be useful,\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n// GNU Affero General internal License for more details.\\n//\\n// You should have received a copy of the GNU Affero General internal License\\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n\\npragma solidity 0.8.19;\\nimport '../UnpackLoanParamtersLib.sol';\\nimport {DataTypes} from '../DataTypes.sol';\\nimport {Math} from '../Math.sol';\\nimport {Discounting} from '../Discounting.sol';\\n\\n/**\\n * @title Untangled's SecuritizaionPoolNAV contract\\n * @notice Main entry point for senior LPs (a.k.a. capital providers)\\n *  Automatically invests across borrower pools using an adjustable strategy.\\n * @author Untangled Team\\n */\\nlibrary GenericLogic {\\n    uint256 constant RATE_SCALING_FACTOR = 10 ** 4;\\n\\n    uint256 constant ONE_HUNDRED_PERCENT = 100 * RATE_SCALING_FACTOR;\\n\\n    uint256 constant ONE = 10 ** 27;\\n    uint256 constant WRITEOFF_RATE_GROUP_START = 1000 * ONE;\\n\\n    event SetRate(bytes32 indexed loan, uint256 rate);\\n    event ChangeRate(bytes32 indexed loan, uint256 newRate);\\n\\n    /** GETTER */\\n    /// @notice getter function for the maturityDate\\n    /// @param nft_ the id of the nft based on the hash of registry and tokenId\\n    /// @return maturityDate_ the maturityDate of the nft\\n    function maturityDate(\\n        DataTypes.Storage storage _poolStorage,\\n        bytes32 nft_\\n    ) internal view returns (uint256 maturityDate_) {\\n        return uint256(_poolStorage.details[nft_].maturityDate);\\n    }\\n\\n    /// @notice getter function for the risk group\\n    /// @param nft_ the id of the nft based on the hash of registry and tokenId\\n    /// @return risk_ the risk group of the nft\\n\\n    function risk(DataTypes.Storage storage _poolStorage, bytes32 nft_) internal view returns (uint256 risk_) {\\n        return uint256(_poolStorage.details[nft_].risk);\\n    }\\n\\n    /// @notice getter function for the nft value\\n    /// @param nft_ the id of the nft based on the hash of registry and tokenId\\n    /// @return nftValue_ the value of the nft\\n\\n    /// @notice getter function for the future value\\n    /// @param nft_ the id of the nft based on the hash of registry and tokenId\\n    /// @return fv_ future value of the loan\\n    function futureValue(DataTypes.Storage storage _poolStorage, bytes32 nft_) internal view returns (uint256 fv_) {\\n        return uint256(_poolStorage.details[nft_].futureValue);\\n    }\\n\\n    // function discountRate() internal view  returns (uint256) {\\n    //     return uint256(_getStorage().discountRate);\\n    // }\\n\\n    /// @notice getter function for the recovery rate PD\\n    /// @param riskID id of a risk group\\n    /// @return recoveryRatePD_ recovery rate PD of the risk group\\n    function recoveryRatePD(\\n        DataTypes.RiskScore[] storage riskScores,\\n        uint256 riskID,\\n        uint256 termLength\\n    ) internal view returns (uint256 recoveryRatePD_) {\\n        DataTypes.RiskScore memory riskParam = getRiskScoreByIdx(riskScores, riskID);\\n        return\\n            Math.ONE -\\n            (Math.ONE * riskParam.probabilityOfDefault * riskParam.lossGivenDefault * termLength) /\\n            (ONE_HUNDRED_PERCENT * ONE_HUNDRED_PERCENT * 365 days);\\n    }\\n\\n    /// @notice getter function for the borrowed amount\\n    /// @param loan id of a loan\\n    /// @return borrowed_ borrowed amount of the loan\\n    function borrowed(DataTypes.Storage storage _poolStorage, uint256 loan) internal view returns (uint256 borrowed_) {\\n        return uint256(_poolStorage.loanDetails[loan].borrowed);\\n    }\\n\\n    /** UTILITY FUNCTION */\\n    // TODO have to use modifier in main contract\\n    function getRiskScoreByIdx(\\n        DataTypes.RiskScore[] storage riskScores,\\n        uint256 idx\\n    ) internal view returns (DataTypes.RiskScore memory) {\\n        if (idx == 0 || riskScores.length == 0) {\\n            // Default risk score\\n            return\\n                DataTypes.RiskScore({\\n                    daysPastDue: 0,\\n                    advanceRate: 1000000,\\n                    penaltyRate: 0,\\n                    interestRate: 0,\\n                    probabilityOfDefault: 0,\\n                    lossGivenDefault: 0,\\n                    writeOffAfterGracePeriod: 0,\\n                    gracePeriod: 0,\\n                    collectionPeriod: 0,\\n                    writeOffAfterCollectionPeriod: 0,\\n                    discountRate: 0\\n                });\\n        }\\n        // Because risk score upload = risk score index onchain + 1\\n        idx = idx - 1;\\n        return riskScores[idx];\\n    }\\n\\n    /// @notice converts a uint256 to uint128\\n    /// @param value the value to be converted\\n    /// @return converted value to uint128\\n    function toUint128(uint256 value) internal pure returns (uint128 converted) {\\n        require(value <= type(uint128).max, \\\"SafeCast: value doesn't fit in 128 bits\\\");\\n        return uint128(value);\\n    }\\n\\n    // TODO have to use modifier in main contract\\n\\n    /// @notice returns if a loan is written off\\n    /// @param loan the id of the loan\\n    function isLoanWrittenOff(DataTypes.Storage storage _poolStorage, uint256 loan) internal view returns (bool) {\\n        return _poolStorage.loanRates[loan] >= WRITEOFF_RATE_GROUP_START;\\n    }\\n\\n    /// @notice calculates and returns the current NAV\\n    /// @return nav_ current NAV\\n    function currentNAV(DataTypes.Storage storage _poolStorage) internal view returns (uint256 nav_) {\\n        (uint256 totalDiscount, uint256 overdue, uint256 writeOffs) = currentPVs(_poolStorage);\\n        return Math.safeAdd(totalDiscount, Math.safeAdd(overdue, writeOffs));\\n    }\\n\\n    function currentNAVAsset(DataTypes.Storage storage _poolStorage, bytes32 tokenId) internal view returns (uint256) {\\n        (uint256 totalDiscount, uint256 overdue, uint256 writeOffs) = currentAV(_poolStorage, tokenId);\\n        return Math.safeAdd(totalDiscount, Math.safeAdd(overdue, writeOffs));\\n    }\\n\\n    /// @notice calculates the present value of the loans together with overdue and written off loans\\n    /// @return totalDiscount the present value of the loans\\n    /// @return overdue the present value of the overdue loans\\n    /// @return writeOffs the present value of the written off loans\\n    function currentPVs(\\n        DataTypes.Storage storage _poolStorage\\n    ) internal view returns (uint256 totalDiscount, uint256 overdue, uint256 writeOffs) {\\n        uint256 latestDiscount;\\n        uint256 overdueLoans;\\n        uint256 discountRate;\\n        uint256 lastNAVUpdate;\\n        {\\n            latestDiscount = _poolStorage.latestDiscount;\\n            overdueLoans = _poolStorage.overdueLoans;\\n            discountRate = _poolStorage.discountRate;\\n            lastNAVUpdate = _poolStorage.lastNAVUpdate;\\n        }\\n        if (latestDiscount == 0) {\\n            // all loans are overdue or writtenOff\\n            return (0, overdueLoans, currentWriteOffs(_poolStorage));\\n        }\\n\\n        uint256 errPV = 0;\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n\\n        // find all new overdue loans since the last update\\n        // calculate the discount of the overdue loans which is needed\\n        // for the total discount calculation\\n        for (uint256 i = lastNAVUpdate; i < nnow; i = i + 1 days) {\\n            uint256 b = _poolStorage.buckets[i];\\n            if (b != 0) {\\n                errPV = Math.safeAdd(\\n                    errPV,\\n                    Math.rmul(b, Discounting.rpow(discountRate, Math.safeSub(nnow, i), Math.ONE))\\n                );\\n                overdue = Math.safeAdd(overdue, b);\\n            }\\n        }\\n\\n        return (\\n            // calculate current totalDiscount based on the previous totalDiscount (optimized calculation)\\n            // the overdue loans are incorrectly in this new result with their current PV and need to be removed\\n            Discounting.secureSub(\\n                Math.rmul(latestDiscount, Discounting.rpow(discountRate, Math.safeSub(nnow, lastNAVUpdate), Math.ONE)),\\n                errPV\\n            ),\\n            // current overdue loans not written off\\n            Math.safeAdd(overdueLoans, overdue),\\n            // current write-offs loans\\n            currentWriteOffs(_poolStorage)\\n        );\\n    }\\n\\n    function currentAV(\\n        DataTypes.Storage storage _poolStorage,\\n        bytes32 tokenId\\n    ) internal view returns (uint256 totalDiscount, uint256 overdue, uint256 writeOffs) {\\n        uint256 _currentWriteOffs = 0;\\n        uint256 discountRate;\\n        uint256 latestDiscountOfNavAssetsID;\\n        uint256 lastNAVUpdate;\\n        uint256 overdueLoansOfNavAssetsID;\\n        {\\n            discountRate = _poolStorage.discountRate;\\n            latestDiscountOfNavAssetsID = _poolStorage.latestDiscountOfNavAssets[tokenId];\\n            lastNAVUpdate = _poolStorage.lastNAVUpdate;\\n            overdueLoansOfNavAssetsID = _poolStorage.overdueLoansOfNavAssets[tokenId];\\n        }\\n\\n        if (isLoanWrittenOff(_poolStorage, uint256(tokenId))) {\\n            uint256 writeOffGroupIndex = currentValidWriteOffGroup(_poolStorage, uint256(tokenId));\\n            _currentWriteOffs = Math.rmul(\\n                debt(_poolStorage, uint256(tokenId)),\\n                uint256(_poolStorage.writeOffGroups[writeOffGroupIndex].percentage)\\n            );\\n        }\\n\\n        if (latestDiscountOfNavAssetsID == 0) {\\n            // all loans are overdue or writtenOff\\n            return (0, overdueLoansOfNavAssetsID, _currentWriteOffs);\\n        }\\n\\n        uint256 errPV = 0;\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n\\n        // loan is overdue since lastNAVUpdate\\n        uint256 mat = Discounting.uniqueDayTimestamp(maturityDate(_poolStorage, tokenId));\\n        if (mat >= lastNAVUpdate && mat < nnow) {\\n            uint256 b = futureValue(_poolStorage, tokenId);\\n            errPV = Math.rmul(b, Discounting.rpow(discountRate, Math.safeSub(nnow, mat), Math.ONE));\\n            overdue = b;\\n        }\\n\\n        return (\\n            Discounting.secureSub(\\n                Math.rmul(\\n                    latestDiscountOfNavAssetsID,\\n                    Discounting.rpow(discountRate, Math.safeSub(nnow, lastNAVUpdate), Math.ONE)\\n                ),\\n                errPV\\n            ),\\n            Math.safeAdd(overdueLoansOfNavAssetsID, overdue),\\n            _currentWriteOffs\\n        );\\n    }\\n\\n    /// @notice returns the sum of all write off loans\\n    /// @return sum of all write off loans\\n    function currentWriteOffs(DataTypes.Storage storage _poolStorage) internal view returns (uint256 sum) {\\n        for (uint256 i = 0; i < _poolStorage.writeOffGroups.length; i++) {\\n            // multiply writeOffGroupDebt with the writeOff rate\\n\\n            sum = Math.safeAdd(\\n                sum,\\n                Math.rmul(\\n                    rateDebt(_poolStorage, WRITEOFF_RATE_GROUP_START + i),\\n                    uint256(_poolStorage.writeOffGroups[i].percentage)\\n                )\\n            );\\n        }\\n        return sum;\\n    }\\n\\n    /// @notice calculates and returns the current NAV and updates the state\\n    /// @return nav_ current NAV\\n    function calcUpdateNAV(DataTypes.Storage storage _poolStorage) internal returns (uint256 nav_) {\\n        (uint256 totalDiscount, uint256 overdue, uint256 writeOffs) = currentPVs(_poolStorage);\\n\\n        for (uint i = 0; i < _poolStorage.loanCount; ++i) {\\n            bytes32 _nftID = _poolStorage.loanToNFT[i];\\n\\n            (uint256 td, uint256 ol, ) = currentAV(_poolStorage, _nftID);\\n            _poolStorage.overdueLoansOfNavAssets[_nftID] = ol;\\n            _poolStorage.latestDiscountOfNavAssets[_nftID] = td;\\n        }\\n\\n        _poolStorage.overdueLoans = overdue;\\n        _poolStorage.latestDiscount = totalDiscount;\\n\\n        _poolStorage.latestNAV = Math.safeAdd(Math.safeAdd(totalDiscount, overdue), writeOffs);\\n        _poolStorage.lastNAVUpdate = Discounting.uniqueDayTimestamp(block.timestamp);\\n        return _poolStorage.latestNAV;\\n    }\\n\\n    /// @notice re-calculates the nav in a non-optimized way\\n    ///  the method is not updating the NAV to latest block.timestamp\\n    /// @return nav_ current NAV\\n    function reCalcNAV(DataTypes.Storage storage _poolStorage) internal returns (uint256 nav_) {\\n        // reCalcTotalDiscount\\n        /// @notice re-calculates the totalDiscount in a non-optimized way based on lastNAVUpdate\\n        /// @return latestDiscount_ returns the total discount of the active loans\\n        uint256 latestDiscount_ = 0;\\n        for (uint256 loanID = 1; loanID < _poolStorage.loanCount; loanID++) {\\n            bytes32 nftID_ = nftID(loanID);\\n            uint256 maturityDate_ = maturityDate(_poolStorage, nftID_);\\n\\n            if (maturityDate_ < _poolStorage.lastNAVUpdate) {\\n                continue;\\n            }\\n\\n            uint256 discountIncrease_ = Discounting.calcDiscount(\\n                _poolStorage.discountRate,\\n                futureValue(_poolStorage, nftID_),\\n                _poolStorage.lastNAVUpdate,\\n                maturityDate_\\n            );\\n            latestDiscount_ = Math.safeAdd(latestDiscount_, discountIncrease_);\\n            _poolStorage.latestDiscountOfNavAssets[nftID_] = discountIncrease_;\\n        }\\n\\n        _poolStorage.latestNAV = Math.safeAdd(\\n            latestDiscount_,\\n            Math.safeSub(_poolStorage.latestNAV, _poolStorage.latestDiscount)\\n        );\\n        _poolStorage.latestDiscount = latestDiscount_;\\n\\n        return _poolStorage.latestNAV;\\n    }\\n\\n    /// @notice returns the nftID for the underlying collateral nft\\n    /// @param loan the loan id\\n    /// @return nftID_ the nftID of the loan\\n    function nftID(uint256 loan) internal pure returns (bytes32 nftID_) {\\n        return bytes32(loan);\\n    }\\n\\n    /// @notice returns the current valid write off group of a loan\\n    /// @param loan the loan id\\n    /// @return writeOffGroup_ the current valid write off group of a loan\\n    function currentValidWriteOffGroup(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan\\n    ) internal view returns (uint256 writeOffGroup_) {\\n        bytes32 nftID_ = nftID(loan);\\n        uint256 maturityDate_ = maturityDate(_poolStorage, nftID_);\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n\\n        DataTypes.NFTDetails memory nftDetail = getAsset(_poolStorage, nftID_);\\n\\n        uint128 _loanRiskIndex = nftDetail.risk - 1;\\n\\n        uint128 lastValidWriteOff = type(uint128).max;\\n        uint128 highestOverdueDays = 0;\\n        // it is not guaranteed that writeOff groups are sorted by overdue days\\n        for (uint128 i = 0; i < _poolStorage.writeOffGroups.length; i++) {\\n            uint128 overdueDays = _poolStorage.writeOffGroups[i].overdueDays;\\n            if (\\n                _poolStorage.writeOffGroups[i].riskIndex == _loanRiskIndex &&\\n                overdueDays >= highestOverdueDays &&\\n                nnow >= maturityDate_ + overdueDays * 1 days\\n            ) {\\n                lastValidWriteOff = i;\\n                highestOverdueDays = overdueDays;\\n            }\\n        }\\n\\n        // returns type(uint128).max if no write-off group is valid for this loan\\n        return lastValidWriteOff;\\n    }\\n\\n    function debt(DataTypes.Storage storage _poolStorage, uint256 loan) internal view returns (uint256 loanDebt) {\\n        uint256 rate_ = _poolStorage.loanRates[loan];\\n        uint256 chi_ = _poolStorage.rates[rate_].chi;\\n        uint256 penaltyChi_ = _poolStorage.rates[rate_].penaltyChi;\\n        if (block.timestamp >= _poolStorage.rates[rate_].lastUpdated) {\\n            chi_ = chargeInterest(\\n                _poolStorage.rates[rate_].chi,\\n                _poolStorage.rates[rate_].ratePerSecond,\\n                _poolStorage.rates[rate_].lastUpdated\\n            );\\n            penaltyChi_ = chargeInterest(\\n                _poolStorage.rates[rate_].penaltyChi,\\n                _poolStorage.rates[rate_].penaltyRatePerSecond,\\n                _poolStorage.rates[rate_].lastUpdated\\n            );\\n        }\\n\\n        if (penaltyChi_ == 0) {\\n            return toAmount(chi_, _poolStorage.pie[loan]);\\n        } else {\\n            return toAmount(penaltyChi_, toAmount(chi_, _poolStorage.pie[loan]));\\n        }\\n    }\\n\\n    function debtWithChi(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan,\\n        uint256 chi,\\n        uint256 penaltyChi\\n    ) internal view returns (uint256 loanDebt) {\\n        if (penaltyChi == 0) {\\n            return toAmount(chi, _poolStorage.pie[loan]);\\n        } else {\\n            return toAmount(penaltyChi, toAmount(chi, _poolStorage.pie[loan]));\\n        }\\n    }\\n\\n    function chiAndPenaltyChi(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan\\n    ) internal view returns (uint256 chi, uint256 penaltyChi) {\\n        uint256 rate_ = _poolStorage.loanRates[loan];\\n        chi = _poolStorage.rates[rate_].chi;\\n        penaltyChi = _poolStorage.rates[rate_].penaltyChi;\\n    }\\n\\n    function rateDebt(DataTypes.Storage storage _poolStorage, uint256 rate) internal view returns (uint256 totalDebt) {\\n        uint256 chi_ = _poolStorage.rates[rate].chi;\\n        uint256 penaltyChi_ = _poolStorage.rates[rate].penaltyChi;\\n        uint256 pie_ = _poolStorage.rates[rate].pie;\\n\\n        if (block.timestamp >= _poolStorage.rates[rate].lastUpdated) {\\n            chi_ = chargeInterest(\\n                _poolStorage.rates[rate].chi,\\n                _poolStorage.rates[rate].ratePerSecond,\\n                _poolStorage.rates[rate].lastUpdated\\n            );\\n            penaltyChi_ = chargeInterest(\\n                _poolStorage.rates[rate].penaltyChi,\\n                _poolStorage.rates[rate].penaltyRatePerSecond,\\n                _poolStorage.rates[rate].lastUpdated\\n            );\\n        }\\n\\n        if (penaltyChi_ == 0) {\\n            return toAmount(chi_, pie_);\\n        } else {\\n            return toAmount(penaltyChi_, toAmount(chi_, pie_));\\n        }\\n    }\\n\\n    function setRate(DataTypes.Storage storage _poolStorage, uint256 loan, uint256 rate) internal {\\n        require(_poolStorage.pie[loan] == 0, 'non-zero-debt');\\n        // rate category has to be initiated\\n        require(_poolStorage.rates[rate].chi != 0, 'rate-group-not-set');\\n        _poolStorage.loanRates[loan] = rate;\\n        emit SetRate(nftID(loan), rate);\\n    }\\n\\n    function changeRate(DataTypes.Storage storage _poolStorage, uint256 loan, uint256 newRate) internal {\\n        require(_poolStorage.rates[newRate].chi != 0, 'rate-group-not-set');\\n        if (newRate >= WRITEOFF_RATE_GROUP_START) {\\n            _poolStorage.rates[newRate].timeStartPenalty = uint48(block.timestamp);\\n        }\\n        uint256 currentRate = _poolStorage.loanRates[loan];\\n        drip(_poolStorage, currentRate);\\n        drip(_poolStorage, newRate);\\n        uint256 pie_ = _poolStorage.pie[loan];\\n        uint256 debt_ = toAmount(_poolStorage.rates[currentRate].chi, pie_);\\n        _poolStorage.rates[currentRate].pie = Math.safeSub(_poolStorage.rates[currentRate].pie, pie_);\\n        _poolStorage.pie[loan] = toPie(_poolStorage.rates[newRate].chi, debt_);\\n        _poolStorage.rates[newRate].pie = Math.safeAdd(_poolStorage.rates[newRate].pie, _poolStorage.pie[loan]);\\n        _poolStorage.loanRates[loan] = newRate;\\n        emit ChangeRate(nftID(loan), newRate);\\n    }\\n\\n    function accrue(DataTypes.Storage storage _poolStorage, uint256 loan) internal {\\n        drip(_poolStorage, _poolStorage.loanRates[loan]);\\n    }\\n\\n    function drip(DataTypes.Storage storage _poolStorage, uint256 rate) internal {\\n        if (block.timestamp >= _poolStorage.rates[rate].lastUpdated) {\\n            (uint256 chi, ) = compounding(\\n                _poolStorage.rates[rate].chi,\\n                _poolStorage.rates[rate].ratePerSecond,\\n                _poolStorage.rates[rate].lastUpdated,\\n                _poolStorage.rates[rate].pie\\n            );\\n            _poolStorage.rates[rate].chi = chi;\\n            if (\\n                _poolStorage.rates[rate].penaltyRatePerSecond != 0 &&\\n                _poolStorage.rates[rate].timeStartPenalty != 0 &&\\n                block.timestamp >= _poolStorage.rates[rate].timeStartPenalty\\n            ) {\\n                uint lastUpdated_ = _poolStorage.rates[rate].lastUpdated > _poolStorage.rates[rate].timeStartPenalty\\n                    ? _poolStorage.rates[rate].lastUpdated\\n                    : _poolStorage.rates[rate].timeStartPenalty;\\n                (uint256 penaltyChi, ) = compounding(\\n                    _poolStorage.rates[rate].penaltyChi,\\n                    _poolStorage.rates[rate].penaltyRatePerSecond,\\n                    lastUpdated_,\\n                    _poolStorage.rates[rate].pie\\n                );\\n                _poolStorage.rates[rate].penaltyChi = penaltyChi;\\n            }\\n            _poolStorage.rates[rate].lastUpdated = uint48(block.timestamp);\\n        }\\n    }\\n\\n    /// Interest functions\\n    // @notice This function provides compounding in seconds\\n    // @param chi Accumulated interest rate over time\\n    // @param ratePerSecond Interest rate accumulation per second in RAD(10\\u02c627)\\n    // @param lastUpdated When the interest rate was last updated\\n    // @param _pie Total sum of all amounts accumulating under one interest rate, divided by that rate\\n    // @return The new accumulated rate, as well as the difference between the debt calculated with the old and new accumulated rates.\\n    function compounding(uint chi, uint ratePerSecond, uint lastUpdated, uint _pie) internal view returns (uint, uint) {\\n        require(block.timestamp >= lastUpdated, 'tinlake-math/invalid-timestamp');\\n        require(chi != 0);\\n        // instead of a interestBearingAmount we use a accumulated interest rate index (chi)\\n        uint updatedChi = _chargeInterest(chi, ratePerSecond, lastUpdated, block.timestamp);\\n        return (updatedChi, Math.safeSub(Math.rmul(updatedChi, _pie), Math.rmul(chi, _pie)));\\n    }\\n\\n    // @notice This function charge interest on a interestBearingAmount\\n    // @param interestBearingAmount is the interest bearing amount\\n    // @param ratePerSecond Interest rate accumulation per second in RAD(10\\u02c627)\\n    // @param lastUpdated last time the interest has been charged\\n    // @return interestBearingAmount + interest\\n    function chargeInterest(\\n        uint interestBearingAmount,\\n        uint ratePerSecond,\\n        uint lastUpdated\\n    ) internal view returns (uint) {\\n        if (block.timestamp >= lastUpdated) {\\n            interestBearingAmount = _chargeInterest(interestBearingAmount, ratePerSecond, lastUpdated, block.timestamp);\\n        }\\n        return interestBearingAmount;\\n    }\\n\\n    function _chargeInterest(\\n        uint interestBearingAmount,\\n        uint ratePerSecond,\\n        uint lastUpdated,\\n        uint current\\n    ) internal pure returns (uint) {\\n        return Math.rmul(Discounting.rpow(ratePerSecond, current - lastUpdated, Math.ONE), interestBearingAmount);\\n    }\\n\\n    // convert pie to debt/savings amount\\n    function toAmount(uint chi, uint _pie) internal pure returns (uint) {\\n        return Math.rmul(_pie, chi);\\n    }\\n\\n    // convert debt/savings amount to pie\\n    function toPie(uint chi, uint amount) internal pure returns (uint) {\\n        return Math.rdivup(amount, chi);\\n    }\\n\\n    function getAsset(\\n        DataTypes.Storage storage _poolStorage,\\n        bytes32 agreementId\\n    ) internal view returns (DataTypes.NFTDetails memory) {\\n        return _poolStorage.details[agreementId];\\n    }\\n\\n    /// @param amortizationUnitType AmortizationUnitType enum\\n    /// @return the corresponding length of the unit in seconds\\n    function _getAmortizationUnitLengthInSeconds(\\n        UnpackLoanParamtersLib.AmortizationUnitType amortizationUnitType\\n    ) private pure returns (uint256) {\\n        if (amortizationUnitType == UnpackLoanParamtersLib.AmortizationUnitType.MINUTES) {\\n            return 1 minutes;\\n        } else if (amortizationUnitType == UnpackLoanParamtersLib.AmortizationUnitType.HOURS) {\\n            return 1 hours;\\n        } else if (amortizationUnitType == UnpackLoanParamtersLib.AmortizationUnitType.DAYS) {\\n            return 1 days;\\n        } else if (amortizationUnitType == UnpackLoanParamtersLib.AmortizationUnitType.WEEKS) {\\n            return 7 days;\\n        } else if (amortizationUnitType == UnpackLoanParamtersLib.AmortizationUnitType.MONTHS) {\\n            return 30 days;\\n        } else if (amortizationUnitType == UnpackLoanParamtersLib.AmortizationUnitType.YEARS) {\\n            return 365 days;\\n        } else {\\n            revert('Unknown amortization unit type.');\\n        }\\n    }\\n\\n    /**\\n     *   Get parameters by Agreement ID (commitment hash)\\n     */\\n    function unpackParamsForAgreementID(\\n        DataTypes.LoanEntry calldata loan\\n    ) internal pure returns (UnpackLoanParamtersLib.InterestParams memory params) {\\n        // The principal amount denominated in the aforementioned token.\\n        uint256 principalAmount;\\n        // The interest rate accrued per amortization unit.\\n        uint256 interestRate;\\n        // The amortization unit in which the repayments installments schedule is defined.\\n        uint256 rawAmortizationUnitType;\\n        // The debt's entire term's length, denominated in the aforementioned amortization units\\n        uint256 termLengthInAmortizationUnits;\\n        uint256 gracePeriodInDays;\\n\\n        (\\n            principalAmount,\\n            interestRate,\\n            rawAmortizationUnitType,\\n            termLengthInAmortizationUnits,\\n            gracePeriodInDays\\n        ) = UnpackLoanParamtersLib.unpackParametersFromBytes(loan.termsParam);\\n\\n        UnpackLoanParamtersLib.AmortizationUnitType amortizationUnitType = UnpackLoanParamtersLib.AmortizationUnitType(\\n            rawAmortizationUnitType\\n        );\\n\\n        // Calculate term length base on Amortization Unit and number\\n        uint256 termLengthInSeconds = termLengthInAmortizationUnits *\\n            _getAmortizationUnitLengthInSeconds(amortizationUnitType);\\n\\n        return\\n            UnpackLoanParamtersLib.InterestParams({\\n                principalAmount: principalAmount,\\n                interestRate: interestRate,\\n                termStartUnixTimestamp: loan.issuanceBlockTimestamp,\\n                termEndUnixTimestamp: termLengthInSeconds + loan.issuanceBlockTimestamp,\\n                amortizationUnitType: amortizationUnitType,\\n                termLengthInAmortizationUnits: termLengthInAmortizationUnits\\n            });\\n    }\\n}\\n\",\"keccak256\":\"0x206e28f96b97f17bab0a2fbefaea9917295bbd922d7952aaf02dd48bd068b951\",\"license\":\"AGPL-3.0-or-later\"},\"contracts/libraries/logic/PoolNAVLogic.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-or-later\\n\\n// https://github.com/centrifuge/tinlake\\n// src/borrower/feed/navfeed.sol -- Tinlake NAV Feed\\n\\n// Copyright (C) 2022 Centrifuge\\n// Copyright (C) 2023 Untangled.Finance\\n//\\n// This program is free software: you can redistribute it and/or modify\\n// it under the terms of the GNU Affero General Public License as published by\\n// the Free Software Foundation, either version 3 of the License, or\\n// (at your option) any later version.\\n//\\n// This program is distributed in the hope that it will be useful,\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n// GNU Affero General Public License for more details.\\n//\\n// You should have received a copy of the GNU Affero General Public License\\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n\\npragma solidity 0.8.19;\\nimport '../UnpackLoanParamtersLib.sol';\\nimport {DataTypes} from '../DataTypes.sol';\\nimport {Math} from '../Math.sol';\\nimport {Discounting} from '../Discounting.sol';\\nimport {GenericLogic} from './GenericLogic.sol';\\n\\n/**\\n * @title Untangled's SecuritizaionPoolNAV contract\\n * @notice Main entry point for senior LPs (a.k.a. capital providers)\\n *  Automatically invests across borrower pools using an adjustable strategy.\\n * @author Untangled Team\\n */\\nlibrary PoolNAVLogic {\\n    uint256 constant RATE_SCALING_FACTOR = 10 ** 4;\\n\\n    uint256 constant ONE_HUNDRED_PERCENT = 100 * RATE_SCALING_FACTOR;\\n\\n    uint256 constant ONE = 10 ** 27;\\n    uint256 constant WRITEOFF_RATE_GROUP_START = 1000 * ONE;\\n\\n    event IncreaseDebt(bytes32 indexed loan, uint256 currencyAmount);\\n    event DecreaseDebt(bytes32 indexed loan, uint256 currencyAmount);\\n\\n    // events\\n    event SetLoanMaturity(bytes32 indexed loan, uint256 maturityDate_);\\n    event WriteOff(bytes32 indexed loan, uint256 indexed writeOffGroupsIndex, bool override_);\\n    event AddLoan(bytes32 indexed loan, uint256 principalAmount, DataTypes.NFTDetails nftdetails);\\n    event Repay(bytes32 indexed loan, uint256 currencyAmount);\\n    event UpdateAssetRiskScore(bytes32 loan, uint256 risk);\\n\\n    /** UTILITY FUNCTION */\\n\\n    function addLoan(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan,\\n        DataTypes.LoanEntry calldata loanEntry\\n    ) public returns (uint256) {\\n        bytes32 _tokenId = bytes32(loan);\\n        UnpackLoanParamtersLib.InterestParams memory loanParam = GenericLogic.unpackParamsForAgreementID(loanEntry);\\n\\n        _poolStorage.details[_tokenId].risk = loanEntry.riskScore;\\n        _poolStorage.details[_tokenId].debtor = loanEntry.debtor;\\n        _poolStorage.details[_tokenId].expirationTimestamp = loanEntry.expirationTimestamp;\\n        _poolStorage.details[_tokenId].principalTokenAddress = loanEntry.principalTokenAddress;\\n        _poolStorage.details[_tokenId].salt = loanEntry.salt;\\n        _poolStorage.details[_tokenId].issuanceBlockTimestamp = loanEntry.issuanceBlockTimestamp;\\n        _poolStorage.details[_tokenId].assetPurpose = loanEntry.assetPurpose;\\n        _poolStorage.details[_tokenId].termsParam = loanEntry.termsParam;\\n\\n        _poolStorage.details[_tokenId].principalAmount = loanParam.principalAmount;\\n        _poolStorage.details[_tokenId].termStartUnixTimestamp = loanParam.termStartUnixTimestamp;\\n        _poolStorage.details[_tokenId].termEndUnixTimestamp = loanParam.termEndUnixTimestamp;\\n        _poolStorage.details[_tokenId].amortizationUnitType = loanParam.amortizationUnitType;\\n        _poolStorage.details[_tokenId].termLengthInAmortizationUnits = loanParam.termLengthInAmortizationUnits;\\n        _poolStorage.details[_tokenId].interestRate = loanParam.interestRate;\\n\\n        DataTypes.RiskScore memory riskParam = GenericLogic.getRiskScoreByIdx(\\n            _poolStorage.riskScores,\\n            loanEntry.riskScore\\n        );\\n        uint256 principalAmount = loanParam.principalAmount;\\n        uint256 _convertedInterestRate;\\n\\n        principalAmount = (principalAmount * riskParam.advanceRate) / (ONE_HUNDRED_PERCENT);\\n        _convertedInterestRate = Math.ONE + (riskParam.interestRate * Math.ONE) / (ONE_HUNDRED_PERCENT * 365 days);\\n\\n        _poolStorage.loanToNFT[_poolStorage.loanCount] = _tokenId;\\n        _poolStorage.loanCount++;\\n        setLoanMaturityDate(_poolStorage, _tokenId, loanParam.termEndUnixTimestamp);\\n        if (_poolStorage.rates[_convertedInterestRate].ratePerSecond == 0) {\\n            // If interest rate is not set\\n            _file(_poolStorage, 'rate', _convertedInterestRate, _convertedInterestRate);\\n        }\\n        GenericLogic.setRate(_poolStorage, loan, _convertedInterestRate);\\n        GenericLogic.accrue(_poolStorage, loan);\\n        _poolStorage.balances[loan] = Math.safeAdd(_poolStorage.balances[loan], principalAmount);\\n        _poolStorage.balance = Math.safeAdd(_poolStorage.balance, principalAmount);\\n\\n        // increase NAV\\n        borrow(_poolStorage, loan, principalAmount);\\n        _incDebt(_poolStorage, loan, principalAmount);\\n\\n        emit AddLoan(_tokenId, principalAmount, _poolStorage.details[_tokenId]);\\n\\n        return principalAmount;\\n    }\\n\\n    function setLoanMaturityDate(\\n        DataTypes.Storage storage _poolStorage,\\n        bytes32 nftID_,\\n        uint256 maturityDate_\\n    ) internal {\\n        require((GenericLogic.futureValue(_poolStorage, nftID_) == 0), 'can-not-change-maturityDate-outstanding-debt');\\n\\n        _poolStorage.details[nftID_].maturityDate = GenericLogic.toUint128(\\n            Discounting.uniqueDayTimestamp(maturityDate_)\\n        );\\n        emit SetLoanMaturity(nftID_, maturityDate_);\\n    }\\n\\n    /// @notice file allows governance to change parameters of the contract\\n    /// @param name name of the parameter\\n    /// @param value new value of the parameter\\n\\n    function file(DataTypes.Storage storage _poolStorage, bytes32 name, uint256 value) public {\\n        if (name == 'discountRate') {\\n            uint256 oldDiscountRate = _poolStorage.discountRate;\\n            _poolStorage.discountRate = Math.ONE + (value * Math.ONE) / (ONE_HUNDRED_PERCENT * 365 days);\\n            // the nav needs to be re-calculated based on the new discount rate\\n            // no need to recalculate it if initialized the first time\\n            if (oldDiscountRate != 0) {\\n                GenericLogic.reCalcNAV(_poolStorage);\\n            }\\n        } else {\\n            revert('unknown config parameter');\\n        }\\n    }\\n\\n    /// @notice file allows governance to change parameters of the contract\\n    /// @param name name of the parameter group\\n    /// @param writeOffPercentage_ the write off rate in percent\\n    /// @param overdueDays_ the number of days after which a loan is considered overdue\\n\\n    function file(\\n        DataTypes.Storage storage _poolStorage,\\n        bytes32 name,\\n        uint256 rate_,\\n        uint256 writeOffPercentage_,\\n        uint256 overdueDays_,\\n        uint256 penaltyRate_,\\n        uint256 riskIndex\\n    ) public {\\n        if (name == 'writeOffGroup') {\\n            uint256 index = _poolStorage.writeOffGroups.length;\\n            uint256 _convertedInterestRate = Math.ONE + (rate_ * Math.ONE) / (ONE_HUNDRED_PERCENT * 365 days);\\n            uint256 _convertedWriteOffPercentage = Math.ONE - (writeOffPercentage_ * Math.ONE) / ONE_HUNDRED_PERCENT;\\n            uint256 _convertedPenaltyRate = Math.ONE +\\n                (Math.ONE * penaltyRate_ * rate_) /\\n                (ONE_HUNDRED_PERCENT * ONE_HUNDRED_PERCENT * 365 days);\\n            uint256 _convertedOverdueDays = overdueDays_ / 1 days;\\n            _poolStorage.writeOffGroups.push(\\n                DataTypes.WriteOffGroup(\\n                    GenericLogic.toUint128(_convertedWriteOffPercentage),\\n                    GenericLogic.toUint128(_convertedOverdueDays),\\n                    GenericLogic.toUint128(riskIndex)\\n                )\\n            );\\n            _file(_poolStorage, 'rate', Math.safeAdd(WRITEOFF_RATE_GROUP_START, index), _convertedInterestRate);\\n            _file(_poolStorage, 'penalty', Math.safeAdd(WRITEOFF_RATE_GROUP_START, index), _convertedPenaltyRate);\\n        } else {\\n            revert('unknown name');\\n        }\\n    }\\n\\n    /// @notice file manages different state configs for the pile\\n    /// only a ward can call this function\\n    /// @param what what config to change\\n    /// @param rate the interest rate group\\n    /// @param value the value to change\\n    function _file(DataTypes.Storage storage _poolStorage, bytes32 what, uint256 rate, uint256 value) private {\\n        if (what == 'rate') {\\n            require(value != 0, 'rate-per-second-can-not-be-0');\\n            if (_poolStorage.rates[rate].chi == 0) {\\n                _poolStorage.rates[rate].chi = Math.ONE;\\n                _poolStorage.rates[rate].lastUpdated = uint48(block.timestamp);\\n            } else {\\n                GenericLogic.drip(_poolStorage, rate);\\n            }\\n            _poolStorage.rates[rate].ratePerSecond = value;\\n        } else if (what == 'penalty') {\\n            require(value != 0, 'penalty-per-second-can-not-be-0');\\n            if (_poolStorage.rates[rate].penaltyChi == 0) {\\n                _poolStorage.rates[rate].penaltyChi = Math.ONE;\\n                _poolStorage.rates[rate].lastUpdated = uint48(block.timestamp);\\n            } else {\\n                GenericLogic.drip(_poolStorage, rate);\\n            }\\n\\n            _poolStorage.rates[rate].penaltyRatePerSecond = value;\\n        } else {\\n            revert('unknown parameter');\\n        }\\n    }\\n\\n    /// @notice borrow updates the NAV for a new borrowed loan\\n    /// @param loan the id of the loan\\n    /// @param amount the amount borrowed\\n    /// @return navIncrease the increase of the NAV impacted by the new borrow\\n    function borrow(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan,\\n        uint256 amount\\n    ) private returns (uint256 navIncrease) {\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n        bytes32 nftID_ = GenericLogic.nftID(loan);\\n        uint256 maturityDate_ = GenericLogic.maturityDate(_poolStorage, nftID_);\\n\\n        require(maturityDate_ > nnow, 'maturity-date-is-not-in-the-future');\\n\\n        if (nnow > _poolStorage.lastNAVUpdate) {\\n            GenericLogic.calcUpdateNAV(_poolStorage);\\n        }\\n\\n        // uint256 beforeNAV = latestNAV;\\n\\n        // calculate amount including fixed fee if applicatable\\n        DataTypes.Rate memory _rate = _poolStorage.rates[_poolStorage.loanRates[loan]];\\n\\n        // calculate future value FV\\n        DataTypes.NFTDetails memory nftDetail = GenericLogic.getAsset(_poolStorage, bytes32(loan));\\n        uint256 fv = Discounting.calcFutureValue(\\n            _rate.ratePerSecond,\\n            amount,\\n            maturityDate_,\\n            GenericLogic.recoveryRatePD(\\n                _poolStorage.riskScores,\\n                nftDetail.risk,\\n                nftDetail.expirationTimestamp - nftDetail.issuanceBlockTimestamp\\n            )\\n        );\\n        _poolStorage.details[nftID_].futureValue = GenericLogic.toUint128(\\n            Math.safeAdd(GenericLogic.futureValue(_poolStorage, nftID_), fv)\\n        );\\n\\n        // add future value to the bucket of assets with the same maturity date\\n        _poolStorage.buckets[maturityDate_] = Math.safeAdd(_poolStorage.buckets[maturityDate_], fv);\\n\\n        // increase borrowed amount for future ceiling computations\\n        _poolStorage.loanDetails[loan].borrowed = GenericLogic.toUint128(\\n            Math.safeAdd(GenericLogic.borrowed(_poolStorage, loan), amount)\\n        );\\n\\n        // return increase NAV amount\\n        navIncrease = Discounting.calcDiscount(_poolStorage.discountRate, fv, nnow, maturityDate_);\\n        _poolStorage.latestDiscount = Math.safeAdd(_poolStorage.latestDiscount, navIncrease);\\n        _poolStorage.latestDiscountOfNavAssets[nftID_] += navIncrease;\\n\\n        _poolStorage.latestNAV = Math.safeAdd(_poolStorage.latestNAV, navIncrease);\\n\\n        return navIncrease;\\n    }\\n\\n    function _decreaseLoan(DataTypes.Storage storage _poolStorage, uint256 loan, uint256 amount) private {\\n        _poolStorage.latestNAV = Discounting.secureSub(\\n            _poolStorage.latestNAV,\\n            Math.rmul(\\n                amount,\\n                GenericLogic.toUint128(\\n                    _poolStorage.writeOffGroups[_poolStorage.loanRates[loan] - WRITEOFF_RATE_GROUP_START].percentage\\n                )\\n            )\\n        );\\n        decDebt(_poolStorage, loan, amount);\\n    }\\n\\n    function _calcFutureValue(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan,\\n        uint256 _debt,\\n        uint256 _maturityDate\\n    ) private view returns (uint256) {\\n        DataTypes.Rate memory _rate = _poolStorage.rates[_poolStorage.loanRates[loan]];\\n        DataTypes.NFTDetails memory nftDetail = GenericLogic.getAsset(_poolStorage, GenericLogic.nftID(loan));\\n        uint256 fv = Discounting.calcFutureValue(\\n            _rate.ratePerSecond,\\n            _debt,\\n            _maturityDate,\\n            GenericLogic.recoveryRatePD(\\n                _poolStorage.riskScores,\\n                nftDetail.risk,\\n                nftDetail.expirationTimestamp - nftDetail.issuanceBlockTimestamp\\n            )\\n        );\\n        return fv;\\n    }\\n\\n    /// @notice repay updates the NAV for a new repaid loan\\n    /// @param loans the ids of the loan\\n    /// @param amounts the amounts repaid\\n    function repayLoan(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256[] calldata loans,\\n        uint256[] calldata amounts\\n    ) external returns (uint256[] memory, uint256[] memory) {\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n\\n        uint256 numberOfLoans = loans.length;\\n\\n        uint256[] memory repayAmounts = new uint256[](numberOfLoans);\\n        uint256[] memory previousDebts = new uint256[](numberOfLoans);\\n\\n        for (uint256 i; i < numberOfLoans; i++) {\\n            uint256 loan = loans[i];\\n            uint256 amount = amounts[i];\\n\\n            // re-define: prevent stack too deep\\n            DataTypes.Storage storage __poolStorage = _poolStorage;\\n\\n            GenericLogic.accrue(__poolStorage, loan);\\n\\n            if (nnow > __poolStorage.lastNAVUpdate) {\\n                GenericLogic.calcUpdateNAV(__poolStorage);\\n            }\\n\\n            // In case of successful repayment the latestNAV is decreased by the repaid amount\\n            uint256 maturityDate_ = GenericLogic.maturityDate(__poolStorage, bytes32(loan));\\n\\n            uint256 _currentDebt = GenericLogic.debt(__poolStorage, loan);\\n            if (amount > _currentDebt) {\\n                amount = _currentDebt;\\n            }\\n\\n            repayAmounts[i] = amount;\\n            previousDebts[i] = _currentDebt;\\n\\n            // case 1: repayment of a written-off loan\\n            if (GenericLogic.isLoanWrittenOff(__poolStorage, loan)) {\\n                // update nav with write-off decrease\\n                _decreaseLoan(__poolStorage, loan, amount);\\n                continue;\\n            }\\n\\n            uint256 preFV = GenericLogic.futureValue(__poolStorage, bytes32(loan));\\n            // in case of partial repayment, compute the fv of the remaining debt and add to the according fv bucket\\n            uint256 fvDecrease = preFV;\\n\\n            // prevent stack too deep\\n            {\\n                uint256 fv = 0;\\n                uint256 _debt = Math.safeSub(_currentDebt, amount); // Remaining\\n                if (_debt != 0) {\\n                    fv = _calcFutureValue(__poolStorage, loan, _debt, maturityDate_);\\n                    if (preFV >= fv) {\\n                        fvDecrease = Math.safeSub(preFV, fv);\\n                    } else {\\n                        fvDecrease = 0;\\n                    }\\n                }\\n\\n                __poolStorage.details[bytes32(loan)].futureValue = GenericLogic.toUint128(fv);\\n            }\\n\\n            // case 2: repayment of a loan before or on maturity date\\n            if (maturityDate_ >= nnow) {\\n                // remove future value decrease from bucket\\n                __poolStorage.buckets[maturityDate_] = Math.safeSub(__poolStorage.buckets[maturityDate_], fvDecrease);\\n\\n                uint256 discountDecrease = Discounting.calcDiscount(\\n                    __poolStorage.discountRate,\\n                    fvDecrease,\\n                    nnow,\\n                    maturityDate_\\n                );\\n\\n                __poolStorage.latestDiscount = Discounting.secureSub(__poolStorage.latestDiscount, discountDecrease);\\n                __poolStorage.latestDiscountOfNavAssets[bytes32(loan)] = Discounting.secureSub(\\n                    __poolStorage.latestDiscountOfNavAssets[bytes32(loan)],\\n                    discountDecrease\\n                );\\n\\n                __poolStorage.latestNAV = Discounting.secureSub(__poolStorage.latestNAV, discountDecrease);\\n            } else {\\n                // case 3: repayment of an overdue loan\\n                __poolStorage.overdueLoans = Math.safeSub(__poolStorage.overdueLoans, fvDecrease);\\n                __poolStorage.overdueLoansOfNavAssets[bytes32(loan)] = Math.safeSub(\\n                    __poolStorage.overdueLoansOfNavAssets[bytes32(loan)],\\n                    fvDecrease\\n                );\\n                __poolStorage.latestNAV = Discounting.secureSub(__poolStorage.latestNAV, fvDecrease);\\n            }\\n\\n            decDebt(__poolStorage, loan, amount);\\n            emit Repay(bytes32(loan), amount);\\n        }\\n        return (repayAmounts, previousDebts);\\n    }\\n\\n    /// @notice writeOff writes off a loan if it is overdue\\n    /// @param loan the id of the loan\\n    function writeOff(DataTypes.Storage storage _poolStorage, uint256 loan) public {\\n        require(!_poolStorage.loanDetails[loan].authWriteOff, 'only-auth-write-off');\\n\\n        bytes32 nftID_ = GenericLogic.nftID(loan);\\n        uint256 maturityDate_ = GenericLogic.maturityDate(_poolStorage, nftID_);\\n        require(maturityDate_ > 0, 'loan-does-not-exist');\\n\\n        // can not write-off healthy loans\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n        DataTypes.NFTDetails memory nftDetail = GenericLogic.getAsset(_poolStorage, bytes32(loan));\\n        DataTypes.RiskScore memory riskParam = GenericLogic.getRiskScoreByIdx(_poolStorage.riskScores, nftDetail.risk);\\n        require(maturityDate_ + riskParam.gracePeriod <= nnow, 'maturity-date-in-the-future');\\n        // check the writeoff group based on the amount of days overdue\\n        uint256 writeOffGroupIndex_ = GenericLogic.currentValidWriteOffGroup(_poolStorage, loan);\\n\\n        if (\\n            writeOffGroupIndex_ < type(uint128).max &&\\n            _poolStorage.loanRates[loan] != WRITEOFF_RATE_GROUP_START + writeOffGroupIndex_\\n        ) {\\n            _writeOff(_poolStorage, loan, writeOffGroupIndex_, nftID_, maturityDate_);\\n            emit WriteOff(nftID_, writeOffGroupIndex_, false);\\n        }\\n    }\\n\\n    /// @notice internal function for the write off\\n    /// @param loan the id of the loan\\n    /// @param writeOffGroupIndex_ the index of the writeoff group\\n    /// @param nftID_ the nftID of the loan\\n    /// @param maturityDate_ the maturity date of the loan\\n    function _writeOff(\\n        DataTypes.Storage storage _poolStorage,\\n        uint256 loan,\\n        uint256 writeOffGroupIndex_,\\n        bytes32 nftID_,\\n        uint256 maturityDate_\\n    ) internal {\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n        // Ensure we have an up to date NAV\\n        if (nnow > _poolStorage.lastNAVUpdate) {\\n            GenericLogic.calcUpdateNAV(_poolStorage);\\n        }\\n\\n        uint256 latestNAV_ = _poolStorage.latestNAV;\\n\\n        // first time written-off\\n        if (!GenericLogic.isLoanWrittenOff(_poolStorage, loan)) {\\n            uint256 fv = GenericLogic.futureValue(_poolStorage, nftID_);\\n            if (Discounting.uniqueDayTimestamp(_poolStorage.lastNAVUpdate) > maturityDate_) {\\n                // write off after the maturity date\\n                _poolStorage.overdueLoans = Discounting.secureSub(_poolStorage.overdueLoans, fv);\\n                _poolStorage.overdueLoansOfNavAssets[nftID_] = Discounting.secureSub(\\n                    _poolStorage.overdueLoansOfNavAssets[nftID_],\\n                    fv\\n                );\\n                latestNAV_ = Discounting.secureSub(latestNAV_, fv);\\n            } else {\\n                // write off before or on the maturity date\\n                _poolStorage.buckets[maturityDate_] = Math.safeSub(_poolStorage.buckets[maturityDate_], fv);\\n\\n                uint256 pv = Math.rmul(\\n                    fv,\\n                    Discounting.rpow(\\n                        _poolStorage.discountRate,\\n                        Math.safeSub(Discounting.uniqueDayTimestamp(maturityDate_), nnow),\\n                        Math.ONE\\n                    )\\n                );\\n                _poolStorage.latestDiscount = Discounting.secureSub(_poolStorage.latestDiscount, pv);\\n                _poolStorage.latestDiscountOfNavAssets[nftID_] = Discounting.secureSub(\\n                    _poolStorage.latestDiscountOfNavAssets[nftID_],\\n                    pv\\n                );\\n\\n                latestNAV_ = Discounting.secureSub(latestNAV_, pv);\\n            }\\n        }\\n\\n        GenericLogic.changeRate(_poolStorage, loan, WRITEOFF_RATE_GROUP_START + writeOffGroupIndex_);\\n        _poolStorage.latestNAV = Math.safeAdd(\\n            latestNAV_,\\n            Math.rmul(\\n                GenericLogic.debt(_poolStorage, loan),\\n                _poolStorage.writeOffGroups[writeOffGroupIndex_].percentage\\n            )\\n        );\\n    }\\n\\n    function updateAssetRiskScore(DataTypes.Storage storage _poolStorage, bytes32 nftID_, uint256 risk_) public {\\n        uint256 nnow = Discounting.uniqueDayTimestamp(block.timestamp);\\n\\n        // no change in risk group\\n        if (risk_ == GenericLogic.risk(_poolStorage, nftID_)) {\\n            return;\\n        }\\n\\n        _poolStorage.details[nftID_].risk = GenericLogic.toUint128(risk_);\\n\\n        // update nav -> latestNAVUpdate = now\\n        if (nnow > _poolStorage.lastNAVUpdate) {\\n            GenericLogic.calcUpdateNAV(_poolStorage);\\n        }\\n\\n        // switch of collateral risk group results in new: ceiling, threshold and interest rate for existing loan\\n        // change to new rate interestRate immediately in pile if loan debt exists\\n        uint256 loan = uint256(nftID_);\\n        if (_poolStorage.pie[loan] != 0) {\\n            DataTypes.RiskScore memory riskParam = GenericLogic.getRiskScoreByIdx(_poolStorage.riskScores, risk_);\\n            uint256 _convertedInterestRate = Math.ONE +\\n                (riskParam.interestRate * Math.ONE) /\\n                (ONE_HUNDRED_PERCENT * 365 days);\\n            if (_poolStorage.rates[_convertedInterestRate].ratePerSecond == 0) {\\n                // If interest rate is not set\\n                _file(_poolStorage, 'rate', _convertedInterestRate, _convertedInterestRate);\\n            }\\n            GenericLogic.changeRate(_poolStorage, loan, _convertedInterestRate);\\n            _poolStorage.details[nftID_].interestRate = riskParam.interestRate;\\n        }\\n\\n        // no currencyAmount borrowed yet\\n        if (GenericLogic.futureValue(_poolStorage, nftID_) == 0) {\\n            return;\\n        }\\n\\n        uint256 maturityDate_ = GenericLogic.maturityDate(_poolStorage, nftID_);\\n\\n        // Changing the risk group of an nft, might lead to a new interest rate for the dependant loan.\\n        // New interest rate leads to a future value.\\n        // recalculation required\\n        {\\n            uint256 fvDecrease = GenericLogic.futureValue(_poolStorage, nftID_);\\n\\n            uint256 navDecrease = Discounting.calcDiscount(_poolStorage.discountRate, fvDecrease, nnow, maturityDate_);\\n\\n            _poolStorage.buckets[maturityDate_] = Math.safeSub(_poolStorage.buckets[maturityDate_], fvDecrease);\\n\\n            _poolStorage.latestDiscount = Discounting.secureSub(_poolStorage.latestDiscount, navDecrease);\\n            _poolStorage.latestDiscountOfNavAssets[nftID_] = Discounting.secureSub(\\n                _poolStorage.latestDiscountOfNavAssets[nftID_],\\n                navDecrease\\n            );\\n\\n            _poolStorage.latestNAV = Discounting.secureSub(_poolStorage.latestNAV, navDecrease);\\n        }\\n\\n        // update latest NAV\\n        // update latest Discount\\n        DataTypes.Rate memory _rate = _poolStorage.rates[_poolStorage.loanRates[loan]];\\n        DataTypes.NFTDetails memory nftDetail = GenericLogic.getAsset(_poolStorage, bytes32(loan));\\n        _poolStorage.details[nftID_].futureValue = GenericLogic.toUint128(\\n            Discounting.calcFutureValue(\\n                _rate.ratePerSecond,\\n                GenericLogic.debt(_poolStorage, loan),\\n                GenericLogic.maturityDate(_poolStorage, nftID_),\\n                GenericLogic.recoveryRatePD(\\n                    _poolStorage.riskScores,\\n                    risk_,\\n                    nftDetail.expirationTimestamp - nftDetail.issuanceBlockTimestamp\\n                )\\n            )\\n        );\\n\\n        uint256 fvIncrease = GenericLogic.futureValue(_poolStorage, nftID_);\\n        uint256 navIncrease = Discounting.calcDiscount(_poolStorage.discountRate, fvIncrease, nnow, maturityDate_);\\n\\n        _poolStorage.buckets[maturityDate_] = Math.safeAdd(_poolStorage.buckets[maturityDate_], fvIncrease);\\n\\n        _poolStorage.latestDiscount = Math.safeAdd(_poolStorage.latestDiscount, navIncrease);\\n        _poolStorage.latestDiscountOfNavAssets[nftID_] += navIncrease;\\n\\n        _poolStorage.latestNAV = Math.safeAdd(_poolStorage.latestNAV, navIncrease);\\n        emit UpdateAssetRiskScore(nftID_, risk_);\\n    }\\n\\n    function _incDebt(DataTypes.Storage storage _poolStorage, uint256 loan, uint256 currencyAmount) private {\\n        uint256 rate = _poolStorage.loanRates[loan];\\n        require(block.timestamp == _poolStorage.rates[rate].lastUpdated, 'rate-group-not-updated');\\n        uint256 pieAmount = GenericLogic.toPie(_poolStorage.rates[rate].chi, currencyAmount);\\n\\n        _poolStorage.pie[loan] = Math.safeAdd(_poolStorage.pie[loan], pieAmount);\\n        _poolStorage.rates[rate].pie = Math.safeAdd(_poolStorage.rates[rate].pie, pieAmount);\\n\\n        emit IncreaseDebt(GenericLogic.nftID(loan), currencyAmount);\\n    }\\n\\n    function decDebt(DataTypes.Storage storage _poolStorage, uint256 loan, uint256 currencyAmount) private {\\n        uint256 rate = _poolStorage.loanRates[loan];\\n        require(block.timestamp == _poolStorage.rates[rate].lastUpdated, 'rate-group-not-updated');\\n        uint256 penaltyChi_ = _poolStorage.rates[rate].penaltyChi;\\n        if (penaltyChi_ > 0) {\\n            currencyAmount = GenericLogic.toPie(penaltyChi_, currencyAmount);\\n        }\\n        uint256 pieAmount = GenericLogic.toPie(_poolStorage.rates[rate].chi, currencyAmount);\\n\\n        _poolStorage.pie[loan] = Math.safeSub(_poolStorage.pie[loan], pieAmount);\\n        _poolStorage.rates[rate].pie = Math.safeSub(_poolStorage.rates[rate].pie, pieAmount);\\n\\n        emit DecreaseDebt(GenericLogic.nftID(loan), currencyAmount);\\n    }\\n}\\n\",\"keccak256\":\"0xfca255a698d4a84bbc9b2c09042bef221e4ba1a78b95e19e17f32ae2934c7c2c\",\"license\":\"AGPL-3.0-or-later\"}},\"version\":1}",
  "bytecode": "0x613aa861003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe730000000000000000000000000000000000000000301460806040526004361061006c5760003560e01c80632f3e0ce01461007157806356a5a299146100a8578063a2cfdc9b146100ca578063a4571bbc146100f8578063b77604c514610118578063d580a21a14610138575b600080fd5b81801561007d57600080fd5b5061009161008c366004613425565b610158565b60405161009f9291906134d9565b60405180910390f35b8180156100b457600080fd5b506100c86100c33660046134fe565b6104d3565b005b8180156100d657600080fd5b506100ea6100e536600461352a565b6108e7565b60405190815260200161009f565b81801561010457600080fd5b506100c861011336600461356d565b610c83565b81801561012457600080fd5b506100c861013336600461358f565b610e81565b81801561014457600080fd5b506100c86101533660046134fe565b61110e565b6060806000610166426111dc565b9050856000816001600160401b03811115610183576101836135db565b6040519080825280602002602001820160405280156101ac578160200160208202803683370190505b5090506000826001600160401b038111156101c9576101c96135db565b6040519080825280602002602001820160405280156101f2578160200160208202803683370190505b50905060005b838110156104c25760008b8b83818110610214576102146135f1565b90506020020135905060008a8a84818110610231576102316135f1565b90506020020135905060008e905061024981846111fe565b80602401548811156102605761025e8161121e565b505b600061026c82856112da565b9050600061027a8386611301565b905080841115610288578093505b8388878151811061029b5761029b6135f1565b602002602001018181525050808787815181106102ba576102ba6135f1565b6020026020010181815250506102d08386611404565b156102ea576102e0838686611436565b50505050506104b0565b60006102f684876114ce565b90508060008061030685896114ed565b905080156103395761031a878a838961153d565b91508184106103345761032d84836114ed565b9250610339565b600092505b61034282611603565b60008a8152601d89016020526040902080546001600160801b0319166001600160801b039290921691909117905550508b8410610414576000848152601f8601602052604090205461039490826114ed565b6000858152601f8701602052604081209190915560218601546103b990838f88611670565b90506103c98660230154826116a3565b602387015560008881526026870160205260409020546103e990826116a3565b6000898152602688016020526040902055602286015461040990826116a3565b602287015550610468565b6104228560250154826114ed565b6025860155600087815260278601602052604090205461044290826114ed565b6000888152602787016020526040902055602285015461046290826116a3565b60228601555b6104738588886116c6565b60405186815287907f59454c2c3385a95399182e59da91521ee5621f0211b9f016ff08b2e8e5fc98439060200160405180910390a2505050505050505b806104ba8161361d565b9150506101f8565b50909a909950975050505050505050565b60006104de426111dc565b6000848152601d860160205260409020600101549091506001600160801b0316820361050a5750505050565b61051382611603565b6000848152601d86016020526040902060010180546001600160801b0319166001600160801b0392909216919091179055602484015481111561055b576105598461121e565b505b600083815260188501602052604090205483901561063f57600061058286600101856117ee565b905060006105936127106064613636565b6105a1906301e13380613636565b676765c793fa10079d601b1b836060015163ffffffff166105c29190613636565b6105cc919061364d565b6105e190676765c793fa10079d601b1b61366f565b6000818152601789016020526040812060020154919250036106105761061087637261746560e01b8384611998565b61061b878483611b90565b50606001516000858152601d87016020526040902063ffffffff909116600e909101555b61064985856114ce565b600003610657575050505050565b600061066386866112da565b9050600061067187876114ce565b905060006106858860210154838786611670565b6000848152601f8a0160205260409020549091506106a390836114ed565b6000848152601f8a01602052604090205560238801546106c390826116a3565b602389015560008781526026890160205260409020546106e390826116a3565b600088815260268a016020526040902055602288015461070390826116a3565b6022890155505060008281526019870160209081526040808320548352601789018252808320815160e0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301526005015465ffffffffffff80821660a0840152600160301b9091041660c08201529061078d8885611d33565b90506107d96107d483604001516107a48b88611301565b6107ae8c8c6112da565b6107cf8d6001018c8860c001518960e001516107ca9190613682565b611e70565b611f11565b611603565b6000888152601d8a016020526040812080546001600160801b0319166001600160801b03939093169290921790915561081289896114ce565b905060006108268a60210154838988611670565b6000868152601f8c0160205260409020549091506108449083611f69565b6000868152601f8c01602052604090205560238a01546108649082611f69565b60238b0155600089815260268b0160205260408120805483929061088990849061366f565b909155505060228a015461089d9082611f69565b60228b0155604080518a8152602081018a90527ff51d891f73afa0326444ca250f11a78ec4ede8d4beaf8c2cfe9f29d5f9e5629c910160405180910390a150505050505050505050565b600082816108f484611fb9565b905061090660e0850160c08601613695565b6000838152601d88016020908152604090912060010180546001600160801b03191660ff9390931692909217909155610941908501856136b8565b6000838152601d880160209081526040918290206002810180546001600160a01b0319166001600160a01b03959095169490941790935560a0870135600690930192909255610995919086019086016136b8565b6000838152601d8801602052604090206003810180546001600160a01b0319166001600160a01b0393909316929092179091556060850135600482015560808501356005909101556109ee610100850160e086016136e1565b6000838152601d880160205260409020600701805460ff191660018381811115610a1a57610a1a613702565b02179055506000828152601d870160209081526040918290208287013560088201558351600982015590830151600a82015590820151600b8201556060820151600c909101805460ff19166001836005811115610a7957610a79613702565b021790555060808101516000838152601d880160205260408120600d81019290925560a0830151600e90920191909155610ac860018801610ac060e0880160c08901613695565b60ff166117ee565b82519091506000610adc6127106064613636565b6020840151610af19063ffffffff1684613636565b610afb919061364d565b9150610b0a6127106064613636565b610b18906301e13380613636565b676765c793fa10079d601b1b846060015163ffffffff16610b399190613636565b610b43919061364d565b610b5890676765c793fa10079d601b1b61366f565b601a8a018054600090815260288c01602052604081208890558154929350610b7f8361361d565b9190505550610b938986866040015161206e565b600081815260178a0160205260408120600201549003610bc057610bc089637261746560e01b8384611998565b610bcb898983612153565b610bd589896111fe565b6000888152601b8a016020526040902054610bf09083611f69565b6000898152601b8b016020526040902055601c890154610c109083611f69565b601c8a0155610c20898984612217565b50610c2c898984612499565b6000858152601d8a01602052604090819020905186917f22998f2397a6b1e965f5fdc5684d29ab2c2ebff824295de89aab9465b66822cd91610c6f918691613762565b60405180910390a250979650505050505050565b6000818152601e83016020526040902054600160801b900460ff1615610ce65760405162461bcd60e51b815260206004820152601360248201527237b7363c96b0baba3416bbb934ba3296b7b33360691b60448201526064015b60405180910390fd5b806000610cf384836112da565b905060008111610d3b5760405162461bcd60e51b81526020600482015260136024820152721b1bd85b8b591bd95ccb5b9bdd0b595e1a5cdd606a1b6044820152606401610cdd565b6000610d46426111dc565b90506000610d548686611d33565b90506000610d728760010183604001516001600160801b03166117ee565b9050828160e0015163ffffffff1685610d8b919061366f565b1115610dd75760405162461bcd60e51b815260206004820152601b60248201527a6d617475726974792d646174652d696e2d7468652d66757475726560281b6044820152606401610cdd565b6000610de38888612598565b90506001600160801b0381108015610e2c575080610e0e676765c793fa10079d601b1b6103e8613636565b610e18919061366f565b600088815260198a01602052604090205414155b15610e7757610e3e8888838989612705565b60405160008152819087907fa0d657cd77a4a207fbc8f50dcd70ea7d5bb4a07cbb549bf7ec75a5768a30e6f99060200160405180910390a35b5050505050505050565b856c077726974654f666647726f757609c1b036110ce5760208701546000610eac6127106064613636565b610eba906301e13380613636565b610ecf676765c793fa10079d601b1b89613636565b610ed9919061364d565b610eee90676765c793fa10079d601b1b61366f565b90506000610eff6127106064613636565b610f14676765c793fa10079d601b1b89613636565b610f1e919061364d565b610f3390676765c793fa10079d601b1b613682565b90506000610f446127106064613636565b610f516127106064613636565b610f5b9190613636565b610f69906301e13380613636565b89610f7f88676765c793fa10079d601b1b613636565b610f899190613636565b610f93919061364d565b610fa890676765c793fa10079d601b1b61366f565b90506000610fb9620151808961364d565b90508b6020016040518060600160405280610fd386611603565b6001600160801b03168152602001610fea84611603565b6001600160801b0316815260200161100189611603565b6001600160801b0390811690915282546001818101855560009485526020948590208451958501518416600160801b02958416959095176002909202909401908155604090920151919092018054919092166001600160801b0319919091161790556110958c637261746560e01b61108f611089676765c793fa10079d601b1b6103e8613636565b89611f69565b87611998565b6110c48c6670656e616c747960c81b6110be611089676765c793fa10079d601b1b6103e8613636565b85611998565b5050505050611105565b60405162461bcd60e51b815260206004820152600c60248201526b756e6b6e6f776e206e616d6560a01b6044820152606401610cdd565b50505050505050565b816b646973636f756e745261746560a01b036111945760218301546111366127106064613636565b611144906301e13380613636565b611159676765c793fa10079d601b1b84613636565b611163919061364d565b61117890676765c793fa10079d601b1b61366f565b6021850155801561118e5761118c846128db565b505b50505050565b60405162461bcd60e51b81526020600482015260186024820152773ab735b737bbb71031b7b73334b3903830b930b6b2ba32b960411b6044820152606401610cdd565b505050565b60006111eb620151808361364d565b6111f89062015180613636565b92915050565b600081815260198301602052604090205461121a90839061298a565b5050565b60008060008061122d85612b4f565b92509250925060005b85601a0154811015611297576000818152602887016020526040812054908061125f8984612c3d565b50600094855260278b01602090815260408087209290925560268c019052909320929092555061129090508161361d565b9050611236565b5060258501829055602385018390556112b96112b38484611f69565b82611f69565b60228601556112c7426111dc565b6024860155505050602290910154919050565b6000818152601d83016020526040902054600160801b90046001600160801b031692915050565b60008181526019830160209081526040808320548084526017860190925282206001810154600482015460059092015490919065ffffffffffff1642106113ae576000838152601787016020526040902060018101546002820154600590920154611374929065ffffffffffff16612d66565b60008481526017880160205260409020600481015460038201546005909201549294506113ab9290919065ffffffffffff16612d66565b90505b806000036113dc5760008581526018870160205260409020546113d2908390612d86565b93505050506111f8565b6113d2816113ff848960180160008a815260200190815260200160002054612d86565b612d86565b600061141d676765c793fa10079d601b1b6103e8613636565b6000928352601993909301602052506040902054101590565b60228301546114be906114b9836114ab60208801611461676765c793fa10079d601b1b6103e8613636565b600089815260198b01602052604090205461147c9190613682565b8154811061148c5761148c6135f1565b60009182526020909120600290910201546001600160801b0316611603565b6001600160801b0316612d8e565b6116a3565b60228401556111d78383836116c6565b6000908152601d9190910160205260409020546001600160801b031690565b6000826114fa8382613682565b91508111156111f85760405162461bcd60e51b815260206004820152600f60248201526e1cd859994b5cdd588b59985a5b1959608a1b6044820152606401610cdd565b60008381526019850160209081526040808320548352601787018252808320815160e0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301526005015465ffffffffffff80821660a0840152600160301b9091041660c0820152816115c08787611d33565b905060006115f7836040015187876107cf8c60010187604001516001600160801b03168860c001518960e001516107ca9190613682565b98975050505050505050565b60006001600160801b0382111561166c5760405162461bcd60e51b815260206004820152602760248201527f53616665436173743a2076616c756520646f65736e27742066697420696e20316044820152663238206269747360c81b6064820152608401610cdd565b5090565b600061169a846116958761168486886114ed565b676765c793fa10079d601b1b612db0565b612e6e565b95945050505050565b6000828211156116b5575060006111f8565b6116bf83836114ed565b9392505050565b6000828152601984016020908152604080832054808452601787019092529091206005015465ffffffffffff1642146117115760405162461bcd60e51b8152600401610cdd9061387c565b60008181526017850160205260409020600401548015611738576117358184612eb3565b92505b60008281526017860160205260408120600101546117569085612eb3565b600086815260188801602052604090205490915061177490826114ed565b600086815260188801602090815260408083209390935585825260178901905220546117a090826114ed565b6000848152601788016020526040902055846040518581527f9d36b5b661e3fc41681961cd76e4b5de0b5f8c5af42446cf86f291efa1363fe6906020015b60405180910390a2505050505050565b6040805161016081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e081018290526101008101829052610120810182905261014081019190915281158061185357508254155b156118b9575060408051610160810182526000808252620f42406020830152918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101919091526111f8565b6118c4600183613682565b91508282815481106118d8576118d86135f1565b600091825260209182902060408051610160810182526002909302909101805463ffffffff8082168552600160201b808304821696860196909652600160401b808304821694860194909452600160601b820481166060860152600160801b820481166080860152600160a01b8204811660a0860152600160c01b8204811660c0860152600160e01b909104811660e085015260019091015480821661010085015293840481166101208401529204909116610140820152905092915050565b82637261746560e01b03611a7457806000036119f55760405162461bcd60e51b815260206004820152601c60248201527b0726174652d7065722d7365636f6e642d63616e2d6e6f742d62652d360241b6044820152606401610cdd565b60008281526017850160205260408120600101549003611a4f5760008281526017850160205260409020676765c793fa10079d601b1b6001820155600501805465ffffffffffff19164265ffffffffffff16179055611a59565b611a59848361298a565b6000828152601785016020526040902060020181905561118e565b826670656e616c747960c81b03611b545780600003611ad55760405162461bcd60e51b815260206004820152601f60248201527f70656e616c74792d7065722d7365636f6e642d63616e2d6e6f742d62652d30006044820152606401610cdd565b60008281526017850160205260408120600401549003611b2f5760008281526017850160205260409020676765c793fa10079d601b1b6004820155600501805465ffffffffffff19164265ffffffffffff16179055611b39565b611b39848361298a565b6000828152601785016020526040902060030181905561118e565b60405162461bcd60e51b81526020600482015260116024820152703ab735b737bbb7103830b930b6b2ba32b960791b6044820152606401610cdd565b60008181526017840160205260408120600101549003611bc25760405162461bcd60e51b8152600401610cdd906138ac565b611bd9676765c793fa10079d601b1b6103e8613636565b8110611c135760008181526017840160205260409020600501805465ffffffffffff60301b1916600160301b4265ffffffffffff16021790555b6000828152601984016020526040902054611c2e848261298a565b611c38848361298a565b600083815260188501602090815260408083205484845260178801909252822060010154909190611c699083612d86565b6000848152601788016020526040902054909150611c8790836114ed565b6000848152601788016020526040808220929092558581522060010154611cae9082612eb3565b6000868152601888016020818152604080842085905588845260178b0182528320549289905252611cde91611f69565b600085815260178801602090815260408083209390935587825260198901905220849055846040518581527f8e2ce1fcb819c387686609f23cdd597abcdd18b0a3bcf284394b65c74101f8c4906020016117de565b611d3b613323565b6000828152601d8401602090815260409182902082516102008101845281546001600160801b038082168352600160801b9091048116938201939093526001808301549093169381019390935260028101546001600160a01b0390811660608501526003820154166080840152600481015460a0840152600581015460c0840152600681015460e08401526007810154909161010084019160ff1690811115611de657611de6613702565b6001811115611df757611df7613702565b81526008820154602082015260098201546040820152600a8201546060820152600b8201546080820152600c82015460a09091019060ff166005811115611e4057611e40613702565b6005811115611e5157611e51613702565b8152600d8201546020820152600e909101546040909101529392505050565b600080611e7d85856117ee565b9050611e8c6127106064613636565b611e996127106064613636565b611ea39190613636565b611eb1906301e13380613636565b838260a0015163ffffffff16836080015163ffffffff16676765c793fa10079d601b1b611ede9190613636565b611ee89190613636565b611ef29190613636565b611efc919061364d565b61169a90676765c793fa10079d601b1b613682565b600080611f1d426111dc565b9050600081851115611f3657611f3385836114ed565b90505b611f5e611f58611f528984676765c793fa10079d601b1b612db0565b88612d8e565b85612d8e565b979650505050505050565b600082611f76838261366f565b91508110156111f85760405162461bcd60e51b815260206004820152600f60248201526e1cd859994b5859190b59985a5b1959608a1b6044820152606401610cdd565b611fc16133a7565b6000806000806000611fd68760400135612ebf565b9398509196509450925090506000836005811115611ff657611ff6613702565b9050600061200382612ee2565b61200d9085613636565b90506040518060c001604052808881526020018a6080013581526020018a608001358361203a919061366f565b815260200183600581111561205157612051613702565b815260200185815260200187815250975050505050505050919050565b61207883836114ce565b156120da5760405162461bcd60e51b815260206004820152602c60248201527f63616e2d6e6f742d6368616e67652d6d61747572697479446174652d6f75747360448201526b1d185b991a5b99cb5919589d60a21b6064820152608401610cdd565b6120e66107d4826111dc565b6000838152601d850160205260409081902080546001600160801b03938416600160801b029316929092179091555182907fe4cc80f41f018b5290a16d068ce1312611f47f682daaa056e36456c59f853d5a906121469084815260200190565b60405180910390a2505050565b6000828152601884016020526040902054156121a15760405162461bcd60e51b815260206004820152600d60248201526c1b9bdb8b5e995c9bcb5919589d609a1b6044820152606401610cdd565b600081815260178401602052604081206001015490036121d35760405162461bcd60e51b8152600401610cdd906138ac565b60008281526019840160205260409020819055816040518281527f502a7eca8a181ab7f1fac839ea906869797df68c21326b477c0da6e7f962fbc990602001612146565b600080612223426111dc565b905083600061223287836112da565b905082811161228e5760405162461bcd60e51b815260206004820152602260248201527f6d617475726974792d646174652d69732d6e6f742d696e2d7468652d66757475604482015261726560f01b6064820152608401610cdd565b86602401548311156122a5576122a38761121e565b505b6000868152601988016020908152604080832054835260178a018252808320815160e0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301526005015465ffffffffffff80821660a0840152600160301b9091041660c0820152906123288989611d33565b9050600061235f836040015189866107cf8e60010187604001516001600160801b03168860c001518960e001516107ca9190613682565b90506123776107d46123718c886114ce565b83611f69565b6000868152601d8c016020908152604080832080546001600160801b0319166001600160801b039590951694909417909355868252601f8d01905220546123be9082611f69565b6000858152601f8c0160205260409020556123ff6107d46123f98c8c6000908152601e9190910160205260409020546001600160801b031690565b8a611f69565b60008a8152601e8c016020526040902080546001600160801b0319166001600160801b039290921691909117905560218a015461243e90828887611670565b965061244e8a6023015488611f69565b60238b0155600085815260268b0160205260408120805489929061247390849061366f565b909155505060228a01546124879088611f69565b60228b01555050505050509392505050565b6000828152601984016020908152604080832054808452601787019092529091206005015465ffffffffffff1642146124e45760405162461bcd60e51b8152600401610cdd9061387c565b60008181526017850160205260408120600101546125029084612eb3565b60008581526018870160205260409020549091506125209082611f69565b6000858152601887016020908152604080832093909355848252601788019052205461254c9082611f69565b6000838152601787016020526040902055836040518481527f025cdc0b70e4d52ce267700d2925d12f1f4046b82d6eea316cb83391813f1c479060200160405180910390a25050505050565b600081816125a685836112da565b905060006125b3426111dc565b905060006125c18785611d33565b90506000600182604001516125d691906138d8565b90506001600160801b036000805b60208b01546001600160801b03821610156126ee5760008b602001826001600160801b031681548110612619576126196135f1565b906000526020600020906002020160000160109054906101000a90046001600160801b03169050846001600160801b03168c602001836001600160801b031681548110612668576126686135f1565b60009182526020909120600160029092020101546001600160801b03161480156126a45750826001600160801b0316816001600160801b031610155b80156126cf57506126b881620151806138ff565b6126cb906001600160801b03168961366f565b8710155b156126db578193508092505b50806126e68161392a565b9150506125e4565b50506001600160801b031698975050505050505050565b6000612710426111dc565b90508560240154811115612729576127278661121e565b505b60228601546127388787611404565b61285457600061274888866114ce565b90508361275889602401546111dc565b11156127ae5761276c8860250154826116a3565b6025890155600085815260278901602052604090205461278c90826116a3565b600086815260278a0160205260409020556127a782826116a3565b9150612852565b6000848152601f890160205260409020546127c990826114ed565b6000858152601f8a01602052604081209190915560218901546128039083906127fe906116846127f88a6111dc565b896114ed565b612d8e565b90506128138960230154826116a3565b60238a0155600086815260268a01602052604090205461283390826116a3565b600087815260268b01602052604090205561284e83826116a3565b9250505b505b612880878787612871676765c793fa10079d601b1b6103e8613636565b61287b919061366f565b611b90565b6128ca816128c56128918a8a611301565b8a60200189815481106128a6576128a66135f1565b60009182526020909120600290910201546001600160801b0316612d8e565b611f69565b876022018190555050505050505050565b60008060015b83601a0154811015612962578060006128fa86836112da565b9050856024015481101561290f575050612950565b600061292e876021015461292389866114ce565b896024015485611670565b905061293a8582611f69565b6000938452602688016020526040909320555091505b8061295a8161361d565b9150506128e1565b50612979816128c5856022015486602301546114ed565b602284018190556023909301555090565b600081815260178301602052604090206005015465ffffffffffff16421061121a576000818152601783016020526040812060018101546002820154600583015492546129df9365ffffffffffff1690612ffb565b5060008381526017850160205260409020600181018290556003015490915015801590612a2d57506000828152601784016020526040902060050154600160301b900465ffffffffffff1615155b8015612a5b57506000828152601784016020526040902060050154600160301b900465ffffffffffff164210155b15612b2057600082815260178401602052604081206005015465ffffffffffff600160301b82048116911611612ab3576000838152601785016020526040902060050154600160301b900465ffffffffffff16612ad0565b600083815260178501602052604090206005015465ffffffffffff165b6000848152601786016020526040812060048101546003820154915465ffffffffffff9490941694509192612b089291908590612ffb565b50600085815260178701602052604090206004015550505b50600090815260179190910160205260409020600501805465ffffffffffff19164265ffffffffffff16179055565b6023810154602582015460218301546024840154600093849384939192909190838503612b9157600083612b828a613096565b96509650965050505050612c36565b600080612b9d426111dc565b9050825b81811015612bfa576000818152601f8c0160205260409020548015612be557612bd6846128c5836127fe8a61168489896114ed565b9350612be28a82611f69565b99505b50612bf3816201518061366f565b9050612ba1565b50612c16612c10876127fe8761168486896114ed565b836116a3565b612c20868a611f69565b612c298c613096565b9850985098505050505050505b9193909250565b6021820154600082815260268401602090815260408083205460248701546027880190935290832054929384938493849391612c798a8a611404565b15612cb2576000612c8a8b8b612598565b9050612cae612c998c8c611301565b8c60200183815481106128a6576128a66135f1565b9550505b82600003612ccc57600097509550929350612d5f92505050565b600080612cd8426111dc565b90506000612cee612ce98e8e6112da565b6111dc565b9050848110158015612cff57508181105b15612d2a576000612d108e8e6114ce565b9050612d24816127fe8a61168487876114ed565b909a5092505b612d45612d3f876127fe8a611684878b6114ed565b846116a3565b612d4f858c611f69565b899a509a509a5050505050505050505b9250925092565b6000814210612d7e57612d7b84848442613107565b93505b509192915050565b60006116bf82845b6000676765c793fa10079d601b1b612da68484613120565b6116bf919061364d565b6000838015612e5057600184168015612dcb57859250612dcf565b8392505b50600283046002850494505b8415612e4a578586028687820414612df257600080fd5b81810181811015612e0257600080fd5b8590049650506001851615612e3f578583028387820414158715151615612e2857600080fd5b81810181811015612e3857600080fd5b8590049350505b600285049450612ddb565b50612e66565b838015612e605760009250612e64565b8392505b505b509392505050565b6000808211612e8f5760405162461bcd60e51b8152600401610cdd90613958565b81612da6612ea885676765c793fa10079d601b1b613120565b6128c560028661364d565b60006116bf8284613182565b6000806000806000612ed0866131c7565b939a9299509097509550909350915050565b600080826005811115612ef757612ef7613702565b03612f045750603c919050565b6001826005811115612f1857612f18613702565b03612f265750610e10919050565b6002826005811115612f3a57612f3a613702565b03612f49575062015180919050565b6003826005811115612f5d57612f5d613702565b03612f6c575062093a80919050565b6004826005811115612f8057612f80613702565b03612f8f575062278d00919050565b6005826005811115612fa357612fa3613702565b03612fb357506301e13380919050565b60405162461bcd60e51b815260206004820152601f60248201527f556e6b6e6f776e20616d6f7274697a6174696f6e20756e697420747970652e006044820152606401610cdd565b6000808342101561304e5760405162461bcd60e51b815260206004820152601e60248201527f74696e6c616b652d6d6174682f696e76616c69642d74696d657374616d7000006044820152606401610cdd565b8560000361305b57600080fd5b600061306987878742613107565b9050806130886130798387612d8e565b6130838a88612d8e565b6114ed565b925092505094509492505050565b6000805b6020830154811015613101576130ed826128c56130d886856130c9676765c793fa10079d601b1b6103e8613636565b6130d3919061366f565b61324c565b8660200185815481106128a6576128a66135f1565b9150806130f98161361d565b91505061309a565b50919050565b600061169a61311a856116848686613682565b86612d8e565b6000811580613144575082826131368183613636565b9250613142908361364d565b145b6111f85760405162461bcd60e51b815260206004820152600f60248201526e1cd859994b5b5d5b0b59985a5b1959608a1b6044820152606401610cdd565b60008082116131a35760405162461bcd60e51b8152600401610cdd90613958565b81612da66131bc85676765c793fa10079d601b1b613120565b6128c58560016114ed565b600080808080600160981b600160f81b03861662ffffff60801b8716600f607c1b881663100000006001607c1b038916630ff000008a1661320985609861330c565b61321485608061330c565b61321f85607c61330c565b61322a85601c61330c565b61323585601461330c565b939f929e50909c509a509098509650505050505050565b600081815260178301602052604081206001810154600482015482546005909301549192909165ffffffffffff1642106132ec5760008581526017870160205260409020600181015460028201546005909201546132b2929065ffffffffffff16612d66565b60008681526017880160205260409020600481015460038201546005909201549295506132e99290919065ffffffffffff16612d66565b91505b816000036132fe576113d28382612d86565b6113d2826113ff8584612d86565b6000613319826002613a66565b6116bf908461364d565b6040805161020081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e0810182905261010081018290526101208101829052610140810182905261016081018290526101808101829052906101a08201905b815260200160008152602001600081525090565b6040518060c001604052806000815260200160008152602001600081526020016000600581111561339357613393613702565b60008083601f8401126133ec57600080fd5b5081356001600160401b0381111561340357600080fd5b6020830191508360208260051b850101111561341e57600080fd5b9250929050565b60008060008060006060868803121561343d57600080fd5b8535945060208601356001600160401b038082111561345b57600080fd5b61346789838a016133da565b9096509450604088013591508082111561348057600080fd5b5061348d888289016133da565b969995985093965092949392505050565b600081518084526020808501945080840160005b838110156134ce578151875295820195908201906001016134b2565b509495945050505050565b6040815260006134ec604083018561349e565b828103602084015261169a818561349e565b60008060006060848603121561351357600080fd5b505081359360208301359350604090920135919050565b600080600083850361014081121561354157600080fd5b8435935060208501359250610100603f198201121561355f57600080fd5b506040840190509250925092565b6000806040838503121561358057600080fd5b50508035926020909101359150565b600080600080600080600060e0888a0312156135aa57600080fd5b505085359760208701359750604087013596606081013596506080810135955060a0810135945060c0013592509050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b60006001820161362f5761362f613607565b5060010190565b80820281158282048414176111f8576111f8613607565b60008261366a57634e487b7160e01b600052601260045260246000fd5b500490565b808201808211156111f8576111f8613607565b818103818111156111f8576111f8613607565b6000602082840312156136a757600080fd5b813560ff811681146116bf57600080fd5b6000602082840312156136ca57600080fd5b81356001600160a01b03811681146116bf57600080fd5b6000602082840312156136f357600080fd5b8135600281106116bf57600080fd5b634e487b7160e01b600052602160045260246000fd5b6001600160801b03169052565b6001600160a01b031690565b6001600160a01b03169052565b6002811061374e5761374e613702565b9052565b6006811061374e5761374e613702565b8281528154610220820190613783602084016001600160801b038316613718565b613793604084018260801c613718565b5060018301546001600160801b03166137af6060840182613718565b506137bd6002840154613725565b6137ca6080840182613731565b506137d86003840154613725565b6137e560a0840182613731565b50600483015460c0830152600583015460e08301526006830154610100830152600783015460ff1661381b61012084018261373e565b5060088301546101408301526009830154610160830152600a830154610180830152600b8301546101a0830152600c83015460ff1661385e6101c0840182613752565b50600d8301546101e0830152600e8301546102008301529392505050565b6020808252601690820152751c985d194b59dc9bdd5c0b5b9bdd0b5d5c19185d195960521b604082015260600190565b6020808252601290820152711c985d194b59dc9bdd5c0b5b9bdd0b5cd95d60721b604082015260600190565b6001600160801b038281168282160390808211156138f8576138f8613607565b5092915050565b6001600160801b0381811683821602808216919082811461392257613922613607565b505092915050565b60006001600160801b038281166002600160801b0319810161394e5761394e613607565b6001019392505050565b60208082526010908201526f6469766973696f6e206279207a65726f60801b604082015260600190565b600181815b808511156139bd5781600019048211156139a3576139a3613607565b808516156139b057918102915b93841c9390800290613987565b509250929050565b6000826139d4575060016111f8565b816139e1575060006111f8565b81600181146139f75760028114613a0157613a1d565b60019150506111f8565b60ff841115613a1257613a12613607565b50506001821b6111f8565b5060208310610133831016604e8410600b8410161715613a40575081810a6111f8565b613a4a8383613982565b8060001904821115613a5e57613a5e613607565b029392505050565b60006116bf83836139c556fea26469706673582212202863507c4eac5a51bdc3b507b7bfc7d52f9aed616d3c05843d2ab175911b845764736f6c63430008130033",
  "deployedBytecode": "0x730000000000000000000000000000000000000000301460806040526004361061006c5760003560e01c80632f3e0ce01461007157806356a5a299146100a8578063a2cfdc9b146100ca578063a4571bbc146100f8578063b77604c514610118578063d580a21a14610138575b600080fd5b81801561007d57600080fd5b5061009161008c366004613425565b610158565b60405161009f9291906134d9565b60405180910390f35b8180156100b457600080fd5b506100c86100c33660046134fe565b6104d3565b005b8180156100d657600080fd5b506100ea6100e536600461352a565b6108e7565b60405190815260200161009f565b81801561010457600080fd5b506100c861011336600461356d565b610c83565b81801561012457600080fd5b506100c861013336600461358f565b610e81565b81801561014457600080fd5b506100c86101533660046134fe565b61110e565b6060806000610166426111dc565b9050856000816001600160401b03811115610183576101836135db565b6040519080825280602002602001820160405280156101ac578160200160208202803683370190505b5090506000826001600160401b038111156101c9576101c96135db565b6040519080825280602002602001820160405280156101f2578160200160208202803683370190505b50905060005b838110156104c25760008b8b83818110610214576102146135f1565b90506020020135905060008a8a84818110610231576102316135f1565b90506020020135905060008e905061024981846111fe565b80602401548811156102605761025e8161121e565b505b600061026c82856112da565b9050600061027a8386611301565b905080841115610288578093505b8388878151811061029b5761029b6135f1565b602002602001018181525050808787815181106102ba576102ba6135f1565b6020026020010181815250506102d08386611404565b156102ea576102e0838686611436565b50505050506104b0565b60006102f684876114ce565b90508060008061030685896114ed565b905080156103395761031a878a838961153d565b91508184106103345761032d84836114ed565b9250610339565b600092505b61034282611603565b60008a8152601d89016020526040902080546001600160801b0319166001600160801b039290921691909117905550508b8410610414576000848152601f8601602052604090205461039490826114ed565b6000858152601f8701602052604081209190915560218601546103b990838f88611670565b90506103c98660230154826116a3565b602387015560008881526026870160205260409020546103e990826116a3565b6000898152602688016020526040902055602286015461040990826116a3565b602287015550610468565b6104228560250154826114ed565b6025860155600087815260278601602052604090205461044290826114ed565b6000888152602787016020526040902055602285015461046290826116a3565b60228601555b6104738588886116c6565b60405186815287907f59454c2c3385a95399182e59da91521ee5621f0211b9f016ff08b2e8e5fc98439060200160405180910390a2505050505050505b806104ba8161361d565b9150506101f8565b50909a909950975050505050505050565b60006104de426111dc565b6000848152601d860160205260409020600101549091506001600160801b0316820361050a5750505050565b61051382611603565b6000848152601d86016020526040902060010180546001600160801b0319166001600160801b0392909216919091179055602484015481111561055b576105598461121e565b505b600083815260188501602052604090205483901561063f57600061058286600101856117ee565b905060006105936127106064613636565b6105a1906301e13380613636565b676765c793fa10079d601b1b836060015163ffffffff166105c29190613636565b6105cc919061364d565b6105e190676765c793fa10079d601b1b61366f565b6000818152601789016020526040812060020154919250036106105761061087637261746560e01b8384611998565b61061b878483611b90565b50606001516000858152601d87016020526040902063ffffffff909116600e909101555b61064985856114ce565b600003610657575050505050565b600061066386866112da565b9050600061067187876114ce565b905060006106858860210154838786611670565b6000848152601f8a0160205260409020549091506106a390836114ed565b6000848152601f8a01602052604090205560238801546106c390826116a3565b602389015560008781526026890160205260409020546106e390826116a3565b600088815260268a016020526040902055602288015461070390826116a3565b6022890155505060008281526019870160209081526040808320548352601789018252808320815160e0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301526005015465ffffffffffff80821660a0840152600160301b9091041660c08201529061078d8885611d33565b90506107d96107d483604001516107a48b88611301565b6107ae8c8c6112da565b6107cf8d6001018c8860c001518960e001516107ca9190613682565b611e70565b611f11565b611603565b6000888152601d8a016020526040812080546001600160801b0319166001600160801b03939093169290921790915561081289896114ce565b905060006108268a60210154838988611670565b6000868152601f8c0160205260409020549091506108449083611f69565b6000868152601f8c01602052604090205560238a01546108649082611f69565b60238b0155600089815260268b0160205260408120805483929061088990849061366f565b909155505060228a015461089d9082611f69565b60228b0155604080518a8152602081018a90527ff51d891f73afa0326444ca250f11a78ec4ede8d4beaf8c2cfe9f29d5f9e5629c910160405180910390a150505050505050505050565b600082816108f484611fb9565b905061090660e0850160c08601613695565b6000838152601d88016020908152604090912060010180546001600160801b03191660ff9390931692909217909155610941908501856136b8565b6000838152601d880160209081526040918290206002810180546001600160a01b0319166001600160a01b03959095169490941790935560a0870135600690930192909255610995919086019086016136b8565b6000838152601d8801602052604090206003810180546001600160a01b0319166001600160a01b0393909316929092179091556060850135600482015560808501356005909101556109ee610100850160e086016136e1565b6000838152601d880160205260409020600701805460ff191660018381811115610a1a57610a1a613702565b02179055506000828152601d870160209081526040918290208287013560088201558351600982015590830151600a82015590820151600b8201556060820151600c909101805460ff19166001836005811115610a7957610a79613702565b021790555060808101516000838152601d880160205260408120600d81019290925560a0830151600e90920191909155610ac860018801610ac060e0880160c08901613695565b60ff166117ee565b82519091506000610adc6127106064613636565b6020840151610af19063ffffffff1684613636565b610afb919061364d565b9150610b0a6127106064613636565b610b18906301e13380613636565b676765c793fa10079d601b1b846060015163ffffffff16610b399190613636565b610b43919061364d565b610b5890676765c793fa10079d601b1b61366f565b601a8a018054600090815260288c01602052604081208890558154929350610b7f8361361d565b9190505550610b938986866040015161206e565b600081815260178a0160205260408120600201549003610bc057610bc089637261746560e01b8384611998565b610bcb898983612153565b610bd589896111fe565b6000888152601b8a016020526040902054610bf09083611f69565b6000898152601b8b016020526040902055601c890154610c109083611f69565b601c8a0155610c20898984612217565b50610c2c898984612499565b6000858152601d8a01602052604090819020905186917f22998f2397a6b1e965f5fdc5684d29ab2c2ebff824295de89aab9465b66822cd91610c6f918691613762565b60405180910390a250979650505050505050565b6000818152601e83016020526040902054600160801b900460ff1615610ce65760405162461bcd60e51b815260206004820152601360248201527237b7363c96b0baba3416bbb934ba3296b7b33360691b60448201526064015b60405180910390fd5b806000610cf384836112da565b905060008111610d3b5760405162461bcd60e51b81526020600482015260136024820152721b1bd85b8b591bd95ccb5b9bdd0b595e1a5cdd606a1b6044820152606401610cdd565b6000610d46426111dc565b90506000610d548686611d33565b90506000610d728760010183604001516001600160801b03166117ee565b9050828160e0015163ffffffff1685610d8b919061366f565b1115610dd75760405162461bcd60e51b815260206004820152601b60248201527a6d617475726974792d646174652d696e2d7468652d66757475726560281b6044820152606401610cdd565b6000610de38888612598565b90506001600160801b0381108015610e2c575080610e0e676765c793fa10079d601b1b6103e8613636565b610e18919061366f565b600088815260198a01602052604090205414155b15610e7757610e3e8888838989612705565b60405160008152819087907fa0d657cd77a4a207fbc8f50dcd70ea7d5bb4a07cbb549bf7ec75a5768a30e6f99060200160405180910390a35b5050505050505050565b856c077726974654f666647726f757609c1b036110ce5760208701546000610eac6127106064613636565b610eba906301e13380613636565b610ecf676765c793fa10079d601b1b89613636565b610ed9919061364d565b610eee90676765c793fa10079d601b1b61366f565b90506000610eff6127106064613636565b610f14676765c793fa10079d601b1b89613636565b610f1e919061364d565b610f3390676765c793fa10079d601b1b613682565b90506000610f446127106064613636565b610f516127106064613636565b610f5b9190613636565b610f69906301e13380613636565b89610f7f88676765c793fa10079d601b1b613636565b610f899190613636565b610f93919061364d565b610fa890676765c793fa10079d601b1b61366f565b90506000610fb9620151808961364d565b90508b6020016040518060600160405280610fd386611603565b6001600160801b03168152602001610fea84611603565b6001600160801b0316815260200161100189611603565b6001600160801b0390811690915282546001818101855560009485526020948590208451958501518416600160801b02958416959095176002909202909401908155604090920151919092018054919092166001600160801b0319919091161790556110958c637261746560e01b61108f611089676765c793fa10079d601b1b6103e8613636565b89611f69565b87611998565b6110c48c6670656e616c747960c81b6110be611089676765c793fa10079d601b1b6103e8613636565b85611998565b5050505050611105565b60405162461bcd60e51b815260206004820152600c60248201526b756e6b6e6f776e206e616d6560a01b6044820152606401610cdd565b50505050505050565b816b646973636f756e745261746560a01b036111945760218301546111366127106064613636565b611144906301e13380613636565b611159676765c793fa10079d601b1b84613636565b611163919061364d565b61117890676765c793fa10079d601b1b61366f565b6021850155801561118e5761118c846128db565b505b50505050565b60405162461bcd60e51b81526020600482015260186024820152773ab735b737bbb71031b7b73334b3903830b930b6b2ba32b960411b6044820152606401610cdd565b505050565b60006111eb620151808361364d565b6111f89062015180613636565b92915050565b600081815260198301602052604090205461121a90839061298a565b5050565b60008060008061122d85612b4f565b92509250925060005b85601a0154811015611297576000818152602887016020526040812054908061125f8984612c3d565b50600094855260278b01602090815260408087209290925560268c019052909320929092555061129090508161361d565b9050611236565b5060258501829055602385018390556112b96112b38484611f69565b82611f69565b60228601556112c7426111dc565b6024860155505050602290910154919050565b6000818152601d83016020526040902054600160801b90046001600160801b031692915050565b60008181526019830160209081526040808320548084526017860190925282206001810154600482015460059092015490919065ffffffffffff1642106113ae576000838152601787016020526040902060018101546002820154600590920154611374929065ffffffffffff16612d66565b60008481526017880160205260409020600481015460038201546005909201549294506113ab9290919065ffffffffffff16612d66565b90505b806000036113dc5760008581526018870160205260409020546113d2908390612d86565b93505050506111f8565b6113d2816113ff848960180160008a815260200190815260200160002054612d86565b612d86565b600061141d676765c793fa10079d601b1b6103e8613636565b6000928352601993909301602052506040902054101590565b60228301546114be906114b9836114ab60208801611461676765c793fa10079d601b1b6103e8613636565b600089815260198b01602052604090205461147c9190613682565b8154811061148c5761148c6135f1565b60009182526020909120600290910201546001600160801b0316611603565b6001600160801b0316612d8e565b6116a3565b60228401556111d78383836116c6565b6000908152601d9190910160205260409020546001600160801b031690565b6000826114fa8382613682565b91508111156111f85760405162461bcd60e51b815260206004820152600f60248201526e1cd859994b5cdd588b59985a5b1959608a1b6044820152606401610cdd565b60008381526019850160209081526040808320548352601787018252808320815160e0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301526005015465ffffffffffff80821660a0840152600160301b9091041660c0820152816115c08787611d33565b905060006115f7836040015187876107cf8c60010187604001516001600160801b03168860c001518960e001516107ca9190613682565b98975050505050505050565b60006001600160801b0382111561166c5760405162461bcd60e51b815260206004820152602760248201527f53616665436173743a2076616c756520646f65736e27742066697420696e20316044820152663238206269747360c81b6064820152608401610cdd565b5090565b600061169a846116958761168486886114ed565b676765c793fa10079d601b1b612db0565b612e6e565b95945050505050565b6000828211156116b5575060006111f8565b6116bf83836114ed565b9392505050565b6000828152601984016020908152604080832054808452601787019092529091206005015465ffffffffffff1642146117115760405162461bcd60e51b8152600401610cdd9061387c565b60008181526017850160205260409020600401548015611738576117358184612eb3565b92505b60008281526017860160205260408120600101546117569085612eb3565b600086815260188801602052604090205490915061177490826114ed565b600086815260188801602090815260408083209390935585825260178901905220546117a090826114ed565b6000848152601788016020526040902055846040518581527f9d36b5b661e3fc41681961cd76e4b5de0b5f8c5af42446cf86f291efa1363fe6906020015b60405180910390a2505050505050565b6040805161016081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e081018290526101008101829052610120810182905261014081019190915281158061185357508254155b156118b9575060408051610160810182526000808252620f42406020830152918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101919091526111f8565b6118c4600183613682565b91508282815481106118d8576118d86135f1565b600091825260209182902060408051610160810182526002909302909101805463ffffffff8082168552600160201b808304821696860196909652600160401b808304821694860194909452600160601b820481166060860152600160801b820481166080860152600160a01b8204811660a0860152600160c01b8204811660c0860152600160e01b909104811660e085015260019091015480821661010085015293840481166101208401529204909116610140820152905092915050565b82637261746560e01b03611a7457806000036119f55760405162461bcd60e51b815260206004820152601c60248201527b0726174652d7065722d7365636f6e642d63616e2d6e6f742d62652d360241b6044820152606401610cdd565b60008281526017850160205260408120600101549003611a4f5760008281526017850160205260409020676765c793fa10079d601b1b6001820155600501805465ffffffffffff19164265ffffffffffff16179055611a59565b611a59848361298a565b6000828152601785016020526040902060020181905561118e565b826670656e616c747960c81b03611b545780600003611ad55760405162461bcd60e51b815260206004820152601f60248201527f70656e616c74792d7065722d7365636f6e642d63616e2d6e6f742d62652d30006044820152606401610cdd565b60008281526017850160205260408120600401549003611b2f5760008281526017850160205260409020676765c793fa10079d601b1b6004820155600501805465ffffffffffff19164265ffffffffffff16179055611b39565b611b39848361298a565b6000828152601785016020526040902060030181905561118e565b60405162461bcd60e51b81526020600482015260116024820152703ab735b737bbb7103830b930b6b2ba32b960791b6044820152606401610cdd565b60008181526017840160205260408120600101549003611bc25760405162461bcd60e51b8152600401610cdd906138ac565b611bd9676765c793fa10079d601b1b6103e8613636565b8110611c135760008181526017840160205260409020600501805465ffffffffffff60301b1916600160301b4265ffffffffffff16021790555b6000828152601984016020526040902054611c2e848261298a565b611c38848361298a565b600083815260188501602090815260408083205484845260178801909252822060010154909190611c699083612d86565b6000848152601788016020526040902054909150611c8790836114ed565b6000848152601788016020526040808220929092558581522060010154611cae9082612eb3565b6000868152601888016020818152604080842085905588845260178b0182528320549289905252611cde91611f69565b600085815260178801602090815260408083209390935587825260198901905220849055846040518581527f8e2ce1fcb819c387686609f23cdd597abcdd18b0a3bcf284394b65c74101f8c4906020016117de565b611d3b613323565b6000828152601d8401602090815260409182902082516102008101845281546001600160801b038082168352600160801b9091048116938201939093526001808301549093169381019390935260028101546001600160a01b0390811660608501526003820154166080840152600481015460a0840152600581015460c0840152600681015460e08401526007810154909161010084019160ff1690811115611de657611de6613702565b6001811115611df757611df7613702565b81526008820154602082015260098201546040820152600a8201546060820152600b8201546080820152600c82015460a09091019060ff166005811115611e4057611e40613702565b6005811115611e5157611e51613702565b8152600d8201546020820152600e909101546040909101529392505050565b600080611e7d85856117ee565b9050611e8c6127106064613636565b611e996127106064613636565b611ea39190613636565b611eb1906301e13380613636565b838260a0015163ffffffff16836080015163ffffffff16676765c793fa10079d601b1b611ede9190613636565b611ee89190613636565b611ef29190613636565b611efc919061364d565b61169a90676765c793fa10079d601b1b613682565b600080611f1d426111dc565b9050600081851115611f3657611f3385836114ed565b90505b611f5e611f58611f528984676765c793fa10079d601b1b612db0565b88612d8e565b85612d8e565b979650505050505050565b600082611f76838261366f565b91508110156111f85760405162461bcd60e51b815260206004820152600f60248201526e1cd859994b5859190b59985a5b1959608a1b6044820152606401610cdd565b611fc16133a7565b6000806000806000611fd68760400135612ebf565b9398509196509450925090506000836005811115611ff657611ff6613702565b9050600061200382612ee2565b61200d9085613636565b90506040518060c001604052808881526020018a6080013581526020018a608001358361203a919061366f565b815260200183600581111561205157612051613702565b815260200185815260200187815250975050505050505050919050565b61207883836114ce565b156120da5760405162461bcd60e51b815260206004820152602c60248201527f63616e2d6e6f742d6368616e67652d6d61747572697479446174652d6f75747360448201526b1d185b991a5b99cb5919589d60a21b6064820152608401610cdd565b6120e66107d4826111dc565b6000838152601d850160205260409081902080546001600160801b03938416600160801b029316929092179091555182907fe4cc80f41f018b5290a16d068ce1312611f47f682daaa056e36456c59f853d5a906121469084815260200190565b60405180910390a2505050565b6000828152601884016020526040902054156121a15760405162461bcd60e51b815260206004820152600d60248201526c1b9bdb8b5e995c9bcb5919589d609a1b6044820152606401610cdd565b600081815260178401602052604081206001015490036121d35760405162461bcd60e51b8152600401610cdd906138ac565b60008281526019840160205260409020819055816040518281527f502a7eca8a181ab7f1fac839ea906869797df68c21326b477c0da6e7f962fbc990602001612146565b600080612223426111dc565b905083600061223287836112da565b905082811161228e5760405162461bcd60e51b815260206004820152602260248201527f6d617475726974792d646174652d69732d6e6f742d696e2d7468652d66757475604482015261726560f01b6064820152608401610cdd565b86602401548311156122a5576122a38761121e565b505b6000868152601988016020908152604080832054835260178a018252808320815160e0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301526005015465ffffffffffff80821660a0840152600160301b9091041660c0820152906123288989611d33565b9050600061235f836040015189866107cf8e60010187604001516001600160801b03168860c001518960e001516107ca9190613682565b90506123776107d46123718c886114ce565b83611f69565b6000868152601d8c016020908152604080832080546001600160801b0319166001600160801b039590951694909417909355868252601f8d01905220546123be9082611f69565b6000858152601f8c0160205260409020556123ff6107d46123f98c8c6000908152601e9190910160205260409020546001600160801b031690565b8a611f69565b60008a8152601e8c016020526040902080546001600160801b0319166001600160801b039290921691909117905560218a015461243e90828887611670565b965061244e8a6023015488611f69565b60238b0155600085815260268b0160205260408120805489929061247390849061366f565b909155505060228a01546124879088611f69565b60228b01555050505050509392505050565b6000828152601984016020908152604080832054808452601787019092529091206005015465ffffffffffff1642146124e45760405162461bcd60e51b8152600401610cdd9061387c565b60008181526017850160205260408120600101546125029084612eb3565b60008581526018870160205260409020549091506125209082611f69565b6000858152601887016020908152604080832093909355848252601788019052205461254c9082611f69565b6000838152601787016020526040902055836040518481527f025cdc0b70e4d52ce267700d2925d12f1f4046b82d6eea316cb83391813f1c479060200160405180910390a25050505050565b600081816125a685836112da565b905060006125b3426111dc565b905060006125c18785611d33565b90506000600182604001516125d691906138d8565b90506001600160801b036000805b60208b01546001600160801b03821610156126ee5760008b602001826001600160801b031681548110612619576126196135f1565b906000526020600020906002020160000160109054906101000a90046001600160801b03169050846001600160801b03168c602001836001600160801b031681548110612668576126686135f1565b60009182526020909120600160029092020101546001600160801b03161480156126a45750826001600160801b0316816001600160801b031610155b80156126cf57506126b881620151806138ff565b6126cb906001600160801b03168961366f565b8710155b156126db578193508092505b50806126e68161392a565b9150506125e4565b50506001600160801b031698975050505050505050565b6000612710426111dc565b90508560240154811115612729576127278661121e565b505b60228601546127388787611404565b61285457600061274888866114ce565b90508361275889602401546111dc565b11156127ae5761276c8860250154826116a3565b6025890155600085815260278901602052604090205461278c90826116a3565b600086815260278a0160205260409020556127a782826116a3565b9150612852565b6000848152601f890160205260409020546127c990826114ed565b6000858152601f8a01602052604081209190915560218901546128039083906127fe906116846127f88a6111dc565b896114ed565b612d8e565b90506128138960230154826116a3565b60238a0155600086815260268a01602052604090205461283390826116a3565b600087815260268b01602052604090205561284e83826116a3565b9250505b505b612880878787612871676765c793fa10079d601b1b6103e8613636565b61287b919061366f565b611b90565b6128ca816128c56128918a8a611301565b8a60200189815481106128a6576128a66135f1565b60009182526020909120600290910201546001600160801b0316612d8e565b611f69565b876022018190555050505050505050565b60008060015b83601a0154811015612962578060006128fa86836112da565b9050856024015481101561290f575050612950565b600061292e876021015461292389866114ce565b896024015485611670565b905061293a8582611f69565b6000938452602688016020526040909320555091505b8061295a8161361d565b9150506128e1565b50612979816128c5856022015486602301546114ed565b602284018190556023909301555090565b600081815260178301602052604090206005015465ffffffffffff16421061121a576000818152601783016020526040812060018101546002820154600583015492546129df9365ffffffffffff1690612ffb565b5060008381526017850160205260409020600181018290556003015490915015801590612a2d57506000828152601784016020526040902060050154600160301b900465ffffffffffff1615155b8015612a5b57506000828152601784016020526040902060050154600160301b900465ffffffffffff164210155b15612b2057600082815260178401602052604081206005015465ffffffffffff600160301b82048116911611612ab3576000838152601785016020526040902060050154600160301b900465ffffffffffff16612ad0565b600083815260178501602052604090206005015465ffffffffffff165b6000848152601786016020526040812060048101546003820154915465ffffffffffff9490941694509192612b089291908590612ffb565b50600085815260178701602052604090206004015550505b50600090815260179190910160205260409020600501805465ffffffffffff19164265ffffffffffff16179055565b6023810154602582015460218301546024840154600093849384939192909190838503612b9157600083612b828a613096565b96509650965050505050612c36565b600080612b9d426111dc565b9050825b81811015612bfa576000818152601f8c0160205260409020548015612be557612bd6846128c5836127fe8a61168489896114ed565b9350612be28a82611f69565b99505b50612bf3816201518061366f565b9050612ba1565b50612c16612c10876127fe8761168486896114ed565b836116a3565b612c20868a611f69565b612c298c613096565b9850985098505050505050505b9193909250565b6021820154600082815260268401602090815260408083205460248701546027880190935290832054929384938493849391612c798a8a611404565b15612cb2576000612c8a8b8b612598565b9050612cae612c998c8c611301565b8c60200183815481106128a6576128a66135f1565b9550505b82600003612ccc57600097509550929350612d5f92505050565b600080612cd8426111dc565b90506000612cee612ce98e8e6112da565b6111dc565b9050848110158015612cff57508181105b15612d2a576000612d108e8e6114ce565b9050612d24816127fe8a61168487876114ed565b909a5092505b612d45612d3f876127fe8a611684878b6114ed565b846116a3565b612d4f858c611f69565b899a509a509a5050505050505050505b9250925092565b6000814210612d7e57612d7b84848442613107565b93505b509192915050565b60006116bf82845b6000676765c793fa10079d601b1b612da68484613120565b6116bf919061364d565b6000838015612e5057600184168015612dcb57859250612dcf565b8392505b50600283046002850494505b8415612e4a578586028687820414612df257600080fd5b81810181811015612e0257600080fd5b8590049650506001851615612e3f578583028387820414158715151615612e2857600080fd5b81810181811015612e3857600080fd5b8590049350505b600285049450612ddb565b50612e66565b838015612e605760009250612e64565b8392505b505b509392505050565b6000808211612e8f5760405162461bcd60e51b8152600401610cdd90613958565b81612da6612ea885676765c793fa10079d601b1b613120565b6128c560028661364d565b60006116bf8284613182565b6000806000806000612ed0866131c7565b939a9299509097509550909350915050565b600080826005811115612ef757612ef7613702565b03612f045750603c919050565b6001826005811115612f1857612f18613702565b03612f265750610e10919050565b6002826005811115612f3a57612f3a613702565b03612f49575062015180919050565b6003826005811115612f5d57612f5d613702565b03612f6c575062093a80919050565b6004826005811115612f8057612f80613702565b03612f8f575062278d00919050565b6005826005811115612fa357612fa3613702565b03612fb357506301e13380919050565b60405162461bcd60e51b815260206004820152601f60248201527f556e6b6e6f776e20616d6f7274697a6174696f6e20756e697420747970652e006044820152606401610cdd565b6000808342101561304e5760405162461bcd60e51b815260206004820152601e60248201527f74696e6c616b652d6d6174682f696e76616c69642d74696d657374616d7000006044820152606401610cdd565b8560000361305b57600080fd5b600061306987878742613107565b9050806130886130798387612d8e565b6130838a88612d8e565b6114ed565b925092505094509492505050565b6000805b6020830154811015613101576130ed826128c56130d886856130c9676765c793fa10079d601b1b6103e8613636565b6130d3919061366f565b61324c565b8660200185815481106128a6576128a66135f1565b9150806130f98161361d565b91505061309a565b50919050565b600061169a61311a856116848686613682565b86612d8e565b6000811580613144575082826131368183613636565b9250613142908361364d565b145b6111f85760405162461bcd60e51b815260206004820152600f60248201526e1cd859994b5b5d5b0b59985a5b1959608a1b6044820152606401610cdd565b60008082116131a35760405162461bcd60e51b8152600401610cdd90613958565b81612da66131bc85676765c793fa10079d601b1b613120565b6128c58560016114ed565b600080808080600160981b600160f81b03861662ffffff60801b8716600f607c1b881663100000006001607c1b038916630ff000008a1661320985609861330c565b61321485608061330c565b61321f85607c61330c565b61322a85601c61330c565b61323585601461330c565b939f929e50909c509a509098509650505050505050565b600081815260178301602052604081206001810154600482015482546005909301549192909165ffffffffffff1642106132ec5760008581526017870160205260409020600181015460028201546005909201546132b2929065ffffffffffff16612d66565b60008681526017880160205260409020600481015460038201546005909201549295506132e99290919065ffffffffffff16612d66565b91505b816000036132fe576113d28382612d86565b6113d2826113ff8584612d86565b6000613319826002613a66565b6116bf908461364d565b6040805161020081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e0810182905261010081018290526101208101829052610140810182905261016081018290526101808101829052906101a08201905b815260200160008152602001600081525090565b6040518060c001604052806000815260200160008152602001600081526020016000600581111561339357613393613702565b60008083601f8401126133ec57600080fd5b5081356001600160401b0381111561340357600080fd5b6020830191508360208260051b850101111561341e57600080fd5b9250929050565b60008060008060006060868803121561343d57600080fd5b8535945060208601356001600160401b038082111561345b57600080fd5b61346789838a016133da565b9096509450604088013591508082111561348057600080fd5b5061348d888289016133da565b969995985093965092949392505050565b600081518084526020808501945080840160005b838110156134ce578151875295820195908201906001016134b2565b509495945050505050565b6040815260006134ec604083018561349e565b828103602084015261169a818561349e565b60008060006060848603121561351357600080fd5b505081359360208301359350604090920135919050565b600080600083850361014081121561354157600080fd5b8435935060208501359250610100603f198201121561355f57600080fd5b506040840190509250925092565b6000806040838503121561358057600080fd5b50508035926020909101359150565b600080600080600080600060e0888a0312156135aa57600080fd5b505085359760208701359750604087013596606081013596506080810135955060a0810135945060c0013592509050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b60006001820161362f5761362f613607565b5060010190565b80820281158282048414176111f8576111f8613607565b60008261366a57634e487b7160e01b600052601260045260246000fd5b500490565b808201808211156111f8576111f8613607565b818103818111156111f8576111f8613607565b6000602082840312156136a757600080fd5b813560ff811681146116bf57600080fd5b6000602082840312156136ca57600080fd5b81356001600160a01b03811681146116bf57600080fd5b6000602082840312156136f357600080fd5b8135600281106116bf57600080fd5b634e487b7160e01b600052602160045260246000fd5b6001600160801b03169052565b6001600160a01b031690565b6001600160a01b03169052565b6002811061374e5761374e613702565b9052565b6006811061374e5761374e613702565b8281528154610220820190613783602084016001600160801b038316613718565b613793604084018260801c613718565b5060018301546001600160801b03166137af6060840182613718565b506137bd6002840154613725565b6137ca6080840182613731565b506137d86003840154613725565b6137e560a0840182613731565b50600483015460c0830152600583015460e08301526006830154610100830152600783015460ff1661381b61012084018261373e565b5060088301546101408301526009830154610160830152600a830154610180830152600b8301546101a0830152600c83015460ff1661385e6101c0840182613752565b50600d8301546101e0830152600e8301546102008301529392505050565b6020808252601690820152751c985d194b59dc9bdd5c0b5b9bdd0b5d5c19185d195960521b604082015260600190565b6020808252601290820152711c985d194b59dc9bdd5c0b5b9bdd0b5cd95d60721b604082015260600190565b6001600160801b038281168282160390808211156138f8576138f8613607565b5092915050565b6001600160801b0381811683821602808216919082811461392257613922613607565b505092915050565b60006001600160801b038281166002600160801b0319810161394e5761394e613607565b6001019392505050565b60208082526010908201526f6469766973696f6e206279207a65726f60801b604082015260600190565b600181815b808511156139bd5781600019048211156139a3576139a3613607565b808516156139b057918102915b93841c9390800290613987565b509250929050565b6000826139d4575060016111f8565b816139e1575060006111f8565b81600181146139f75760028114613a0157613a1d565b60019150506111f8565b60ff841115613a1257613a12613607565b50506001821b6111f8565b5060208310610133831016604e8410600b8410161715613a40575081810a6111f8565b613a4a8383613982565b8060001904821115613a5e57613a5e613607565b029392505050565b60006116bf83836139c556fea26469706673582212202863507c4eac5a51bdc3b507b7bfc7d52f9aed616d3c05843d2ab175911b845764736f6c63430008130033",
  "devdoc": {
    "author": "Untangled Team",
    "kind": "dev",
    "methods": {
      "file(DataTypes.Storage storage,bytes32,uint256)": {
        "params": {
          "name": "name of the parameter",
          "value": "new value of the parameter"
        }
      },
      "file(DataTypes.Storage storage,bytes32,uint256,uint256,uint256,uint256,uint256)": {
        "params": {
          "name": "name of the parameter group",
          "overdueDays_": "the number of days after which a loan is considered overdue",
          "writeOffPercentage_": "the write off rate in percent"
        }
      },
      "repayLoan(DataTypes.Storage storage,uint256[],uint256[])": {
        "params": {
          "amounts": "the amounts repaid",
          "loans": "the ids of the loan"
        }
      },
      "writeOff(DataTypes.Storage storage,uint256)": {
        "params": {
          "loan": "the id of the loan"
        }
      }
    },
    "title": "Untangled's SecuritizaionPoolNAV contract",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "addLoan(DataTypes.Storage storage,uint256,DataTypes.LoanEntry)": {
        "notice": "UTILITY FUNCTION "
      },
      "file(DataTypes.Storage storage,bytes32,uint256)": {
        "notice": "file allows governance to change parameters of the contract"
      },
      "file(DataTypes.Storage storage,bytes32,uint256,uint256,uint256,uint256,uint256)": {
        "notice": "file allows governance to change parameters of the contract"
      },
      "repayLoan(DataTypes.Storage storage,uint256[],uint256[])": {
        "notice": "repay updates the NAV for a new repaid loan"
      },
      "writeOff(DataTypes.Storage storage,uint256)": {
        "notice": "writeOff writes off a loan if it is overdue"
      }
    },
    "notice": "Main entry point for senior LPs (a.k.a. capital providers)  Automatically invests across borrower pools using an adjustable strategy.",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}